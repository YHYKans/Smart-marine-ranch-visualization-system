{"ast":null,"code":"var _jsxFileName = \"D:\\\\\\u8F6F\\u4EF6\\u5DE5\\u7A0B\\\\\\u667A\\u6167\\u6D77\\u6D0B\\u7267\\u573A\\u53EF\\u89C6\\u5316\\u7CFB\\u7EDF\\\\frontend\\\\src\\\\pages\\\\ChatPage.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction ChatPage() {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const messagesEndRef = useRef(null);\n  const messageContainerRef = useRef(null);\n  useEffect(() => {\n    if (messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({\n        behavior: 'smooth'\n      });\n    }\n  }, [messages]);\n  const handleInputChange = e => {\n    setInput(e.target.value);\n  };\n  const getStreamingResponse = async (message, messageId) => {\n    try {\n      const response = await fetch('http://localhost:3001/api/chat', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          message\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const reader = response.body.getReader();\n      const decoder = new TextDecoder('utf-8');\n      let buffer = '';\n      while (true) {\n        const {\n          done,\n          value\n        } = await reader.read();\n        if (done) {\n          break;\n        }\n        buffer += decoder.decode(value, {\n          stream: true\n        });\n        const lines = buffer.split('\\n\\n');\n        buffer = lines.pop() || '';\n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            try {\n              const data = JSON.parse(line.slice(6));\n              setMessages(prev => prev.map(msg => msg.id === messageId ? {\n                ...msg,\n                content: msg.content + (data.content || ''),\n                ...(data.finished ? {\n                  isStreaming: false\n                } : {})\n              } : msg));\n              if (data.error) {\n                throw new Error(data.error);\n              }\n            } catch (e) {\n              console.error('Error parsing SSE data:', e);\n            }\n          }\n        }\n      }\n      setMessages(prev => prev.map(msg => msg.id === messageId ? {\n        ...msg,\n        isStreaming: false\n      } : msg));\n    } catch (error) {\n      console.error('Error in streaming response:', error);\n      setMessages(prev => prev.map(msg => msg.id === messageId ? {\n        ...msg,\n        content: msg.content + '\\n\\n[连接中断] ' + error.message,\n        isStreaming: false\n      } : msg));\n    }\n  };\n  const simulateStreamingResponse = async (message, messageId) => {\n    try {\n      const words = `这是一个模拟回应。目前无法连接到后端服务器，所以显示这条测试消息。您的问题是关于: \"${message}\"。请确保后端服务器正在运行，并且可以从前端访问API端点 /api/chat。`;\n      const wordArray = words.split(' ');\n      for (let i = 0; i < wordArray.length; i++) {\n        setMessages(prev => prev.map(msg => msg.id === messageId ? {\n          ...msg,\n          content: msg.content + (i > 0 ? ' ' : '') + wordArray[i],\n          ...(i === wordArray.length - 1 ? {\n            isStreaming: false\n          } : {})\n        } : msg));\n        await new Promise(resolve => setTimeout(resolve, 50));\n      }\n    } catch (error) {\n      console.error('Error in simulation:', error);\n      setMessages(prev => prev.map(msg => msg.id === messageId ? {\n        ...msg,\n        content: '获取回应时出错',\n        isStreaming: false\n      } : msg));\n    }\n  };\n  const handleSubmit = async e => {\n    if (e) e.preventDefault();\n    if (!input.trim() || isLoading) return;\n    const userMessage = {\n      role: 'user',\n      content: input,\n      timestamp: new Date().toLocaleTimeString()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setInput('');\n    setIsLoading(true);\n    setError(null);\n    try {\n      const aiMessageId = Date.now();\n      setMessages(prev => [...prev, {\n        id: aiMessageId,\n        role: 'assistant',\n        content: '',\n        timestamp: new Date().toLocaleTimeString(),\n        isStreaming: true\n      }]);\n      try {\n        await getStreamingResponse(userMessage.content, aiMessageId);\n      } catch (apiError) {\n        console.warn('无法连接到后端API，使用模拟模式:', apiError);\n        await simulateStreamingResponse(userMessage.content, aiMessageId);\n      }\n    } catch (err) {\n      setError('连接服务器失败，请稍后再试');\n      console.error('Error:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleKeyDown = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit();\n    }\n  };\n\n  // 海洋背景动画元素\n  const renderOceanElements = () => {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [[...Array(20)].map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute rounded-full animate-pulse\",\n        style: {\n          top: `${Math.random() * 100}%`,\n          left: `${Math.random() * 100}%`,\n          width: `${Math.random() * 10 + 2}px`,\n          height: `${Math.random() * 10 + 2}px`,\n          backgroundColor: i % 3 === 0 ? '#00FFFF' : i % 3 === 1 ? '#00BFFF' : '#1E90FF',\n          opacity: Math.random() * 0.5 + 0.2,\n          animationDuration: `${Math.random() * 5 + 3}s`,\n          zIndex: 0\n        }\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-0 left-0 w-full overflow-hidden z-0\",\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"relative block w-[calc(100%+1.3px)] h-[80px]\",\n          \"data-name\": \"Layer 1\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          viewBox: \"0 0 1200 120\",\n          preserveAspectRatio: \"none\",\n          children: [/*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z\",\n            className: \"fill-current text-blue-500 opacity-30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z\",\n            className: \"fill-current text-teal-400 opacity-40\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z\",\n            className: \"fill-current text-cyan-300 opacity-30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-screen bg-gradient-to-br from-[#0a192f] via-[#0c2a4a] to-[#0a3d62] overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-[rgba(10,25,47,0.8)] backdrop-blur-md border-b border-cyan-500/30 p-4 flex items-center justify-between z-10\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-cyan-500/10 p-2 rounded-full border border-cyan-400/30 mr-3\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xl text-cyan-400\",\n            children: \"\\uD83C\\uDF0A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-xl font-bold text-white\",\n          children: \"\\u667A\\u6167\\u6D77\\u6D0B\\u7267\\u573A AI \\u52A9\\u624B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-cyan-300 text-sm\",\n        children: \"\\u667A\\u80FD\\u5BF9\\u8BDD \\xB7 \\u6D77\\u6D0B\\u517B\\u6B96 \\xB7 \\u6570\\u636E\\u5206\\u6790\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 z-0 overflow-hidden\",\n      children: renderOceanElements()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: messageContainerRef,\n      className: \"flex-1 p-6 overflow-y-auto relative z-10\",\n      children: messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col items-center justify-center h-full text-center z-10 relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-cyan-500/10 p-6 rounded-full border border-cyan-400/30 mb-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-6xl text-cyan-400\",\n            children: \"\\uD83C\\uDF0A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-3xl font-bold text-white mb-3\",\n          children: \"\\u6B22\\u8FCE\\u4F7F\\u7528\\u667A\\u6167\\u6D77\\u6D0B\\u7267\\u573A AI \\u52A9\\u624B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-cyan-200 max-w-lg mb-8\",\n          children: \"\\u6211\\u662F\\u60A8\\u7684\\u6D77\\u6D0B\\u517B\\u6B96\\u667A\\u80FD\\u52A9\\u624B\\uFF0C\\u53EF\\u4EE5\\u56DE\\u7B54\\u5173\\u4E8E\\u6D77\\u6D0B\\u7267\\u573A\\u5EFA\\u8BBE\\u3001\\u517B\\u6B96\\u6280\\u672F\\u3001\\u73AF\\u5883\\u76D1\\u6D4B\\u7B49\\u4E13\\u4E1A\\u95EE\\u9898\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-2 gap-4 max-w-lg w-full\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-[rgba(10,25,47,0.7)] border border-cyan-500/30 rounded-xl p-4 text-left cursor-pointer hover:bg-[rgba(10,25,47,0.9)] transition-colors\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-cyan-400 text-lg mb-2\",\n              children: \"\\uD83D\\uDCCA \\u6570\\u636E\\u5206\\u6790\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-cyan-200\",\n              children: \"\\u5982\\u4F55\\u5206\\u6790\\u6D77\\u6D0B\\u7267\\u573A\\u6C34\\u8D28\\u6570\\u636E\\uFF1F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-[rgba(10,25,47,0.7)] border border-cyan-500/30 rounded-xl p-4 text-left cursor-pointer hover:bg-[rgba(10,25,47,0.9)] transition-colors\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-cyan-400 text-lg mb-2\",\n              children: \"\\uD83D\\uDC1F \\u517B\\u6B96\\u6280\\u672F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-cyan-200\",\n              children: \"\\u6DF1\\u6D77\\u7F51\\u7BB1\\u517B\\u6B96\\u7684\\u6700\\u4F73\\u5B9E\\u8DF5\\u662F\\u4EC0\\u4E48\\uFF1F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-[rgba(10,25,47,0.7)] border border-cyan-500/30 rounded-xl p-4 text-left cursor-pointer hover:bg-[rgba(10,25,47,0.9)] transition-colors\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-cyan-400 text-lg mb-2\",\n              children: \"\\uD83D\\uDCC8 \\u73AF\\u5883\\u76D1\\u6D4B\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-cyan-200\",\n              children: \"\\u5982\\u4F55\\u76D1\\u6D4B\\u6D77\\u6D0B\\u7267\\u573A\\u7684\\u751F\\u6001\\u73AF\\u5883\\uFF1F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-[rgba(10,25,47,0.7)] border border-cyan-500/30 rounded-xl p-4 text-left cursor-pointer hover:bg-[rgba(10,25,47,0.9)] transition-colors\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-cyan-400 text-lg mb-2\",\n              children: \"\\uD83E\\uDD16 AI\\u5E94\\u7528\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-cyan-200\",\n              children: \"AI\\u5728\\u6D77\\u6D0B\\u517B\\u6B96\\u4E2D\\u6709\\u54EA\\u4E9B\\u521B\\u65B0\\u5E94\\u7528\\uFF1F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4 max-w-4xl mx-auto\",\n        children: [messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `max-w-3/4 rounded-2xl p-4 relative overflow-hidden ${message.role === 'user' ? 'bg-gradient-to-r from-cyan-600 to-blue-700 text-white' : 'bg-[rgba(255,255,255,0.1)] backdrop-blur-sm border border-cyan-500/30 text-white'}`,\n            children: [message.role === 'assistant' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-cyan-400 to-transparent\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-start\",\n              children: [message.role === 'assistant' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-cyan-500/20 p-2 rounded-full mr-3\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-cyan-300\",\n                  children: \"\\uD83E\\uDD16\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1\",\n                children: [message.role === 'user' ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"whitespace-pre-wrap\",\n                  children: message.content\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"markdown-content\",\n                  children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n                    className: \"prose prose-invert prose-cyan\",\n                    children: message.content\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 316,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 315,\n                  columnNumber: 25\n                }, this), message.isStreaming && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex space-x-1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"h-2 w-2 bg-cyan-400 rounded-full animate-bounce\",\n                      style: {\n                        animationDelay: '-0.32s'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 325,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"h-2 w-2 bg-cyan-400 rounded-full animate-bounce\",\n                      style: {\n                        animationDelay: '-0.16s'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 326,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"h-2 w-2 bg-cyan-400 rounded-full animate-bounce\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 327,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 324,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `text-xs mt-2 ${message.role === 'user' ? 'text-blue-200' : 'text-cyan-300'}`,\n                  children: [message.role === 'user' ? '用户' : '海洋AI助手', \" \\xB7 \", message.timestamp]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 21\n              }, this), message.role === 'user' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-blue-600/30 p-2 rounded-full ml-3\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-blue-200\",\n                  children: \"\\uD83D\\uDC64\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 17\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-red-500/20 border border-red-500/40 text-red-300 px-4 py-3 rounded-lg mx-6 mb-4 max-w-4xl mx-auto z-10 relative\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-t border-cyan-500/30 p-4 bg-[rgba(10,25,47,0.8)] backdrop-blur-md z-10\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"max-w-4xl mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-3 items-end\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: input,\n              onChange: handleInputChange,\n              onKeyDown: handleKeyDown,\n              disabled: isLoading,\n              placeholder: \"\\u8BF7\\u8F93\\u5165\\u5173\\u4E8E\\u6D77\\u6D0B\\u517B\\u6B96\\u7684\\u95EE\\u9898...\",\n              rows: 1,\n              className: \"w-full border border-cyan-500/50 bg-[rgba(10,40,70,0.5)] text-white rounded-2xl px-4 py-3 pr-12 focus:outline-none focus:ring-2 focus:ring-cyan-500 resize-none\",\n              style: {\n                minHeight: '56px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute right-3 bottom-3 text-gray-400 text-sm\",\n              children: \"Shift + Enter \\u6362\\u884C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: isLoading || !input.trim(),\n            className: `h-14 w-14 flex items-center justify-center rounded-full ${isLoading || !input.trim() ? 'bg-gray-600 text-gray-500 cursor-not-allowed' : 'bg-gradient-to-r from-cyan-500 to-blue-600 text-white hover:from-cyan-600 hover:to-blue-700'} transition-all`,\n            children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-2 w-2 bg-white rounded-full animate-bounce\",\n                style: {\n                  animationDelay: '-0.32s'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-2 w-2 bg-white rounded-full animate-bounce\",\n                style: {\n                  animationDelay: '-0.16s'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-2 w-2 bg-white rounded-full animate-bounce\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              viewBox: \"0 0 24 24\",\n              fill: \"currentColor\",\n              className: \"w-6 h-6\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-3 flex justify-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-cyan-400/70 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              viewBox: \"0 0 24 24\",\n              fill: \"currentColor\",\n              className: \"w-4 h-4 mr-1\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                fillRule: \"evenodd\",\n                d: \"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z\",\n                clipRule: \"evenodd\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 15\n            }, this), \"\\u667A\\u6167\\u6D77\\u6D0B\\u7267\\u573A AI \\u52A9\\u624B \\xB7 \\u63D0\\u4F9B\\u4E13\\u4E1A\\u6D77\\u6D0B\\u517B\\u6B96\\u54A8\\u8BE2\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        \n        @keyframes fadeInUp {\n          from { \n            opacity: 0;\n            transform: translateY(20px);\n          }\n          to { \n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n        \n        @keyframes wiggle {\n          0%, 100% { transform: rotate(0deg); }\n          25% { transform: rotate(5deg); }\n          50% { transform: rotate(-5deg); }\n          75% { transform: rotate(5deg); }\n        }\n        \n        .animate-wiggle {\n          animation: wiggle 8s infinite;\n        }\n        \n        .animate-bounce {\n          animation: bounce 1.5s infinite;\n        }\n        \n        @keyframes bounce {\n          0%, 100% { transform: translateY(0); }\n          50% { transform: translateY(-5px); }\n        }\n        \n        .prose-cyan a {\n          color: #06b6d4;\n          text-decoration: underline;\n          text-decoration-color: rgba(6, 182, 212, 0.3);\n        }\n        \n        .prose-cyan code {\n          background-color: rgba(6, 182, 212, 0.15);\n          color: #06b6d4;\n          padding: 0.2em 0.4em;\n          border-radius: 0.25em;\n        }\n        \n        .prose-cyan pre {\n          background-color: rgba(10, 25, 47, 0.8);\n          border: 1px solid rgba(6, 182, 212, 0.3);\n          border-radius: 0.5rem;\n          padding: 1rem;\n          overflow-x: auto;\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 232,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatPage, \"jQA1E/vNG3Klhi5vJMSQCnI/Qjw=\");\n_c = ChatPage;\nexport default ChatPage;\nvar _c;\n$RefreshReg$(_c, \"ChatPage\");","map":{"version":3,"names":["useState","useEffect","useRef","ReactMarkdown","jsxDEV","_jsxDEV","Fragment","_Fragment","ChatPage","_s","messages","setMessages","input","setInput","isLoading","setIsLoading","error","setError","messagesEndRef","messageContainerRef","current","scrollIntoView","behavior","handleInputChange","e","target","value","getStreamingResponse","message","messageId","response","fetch","method","headers","body","JSON","stringify","ok","Error","status","reader","getReader","decoder","TextDecoder","buffer","done","read","decode","stream","lines","split","pop","line","startsWith","data","parse","slice","prev","map","msg","id","content","finished","isStreaming","console","simulateStreamingResponse","words","wordArray","i","length","Promise","resolve","setTimeout","handleSubmit","preventDefault","trim","userMessage","role","timestamp","Date","toLocaleTimeString","aiMessageId","now","apiError","warn","err","handleKeyDown","key","shiftKey","renderOceanElements","children","Array","_","className","style","top","Math","random","left","width","height","backgroundColor","opacity","animationDuration","zIndex","fileName","_jsxFileName","lineNumber","columnNumber","xmlns","viewBox","preserveAspectRatio","d","ref","index","animationDelay","onSubmit","onChange","onKeyDown","disabled","placeholder","rows","minHeight","type","fill","fillRule","clipRule","jsx","_c","$RefreshReg$"],"sources":["D:/软件工程/智慧海洋牧场可视化系统/frontend/src/pages/ChatPage.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\r\nimport ReactMarkdown from 'react-markdown';\r\n\r\nfunction ChatPage() {\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  \r\n  const messagesEndRef = useRef(null);\r\n  const messageContainerRef = useRef(null);\r\n  \r\n  useEffect(() => {\r\n    if (messagesEndRef.current) {\r\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  }, [messages]);\r\n  \r\n  const handleInputChange = (e) => {\r\n    setInput(e.target.value);\r\n  };\r\n  \r\n  const getStreamingResponse = async (message, messageId) => {\r\n    try {\r\n      const response = await fetch('http://localhost:3001/api/chat', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ message }),\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      \r\n      const reader = response.body.getReader();\r\n      const decoder = new TextDecoder('utf-8');\r\n      let buffer = '';\r\n      \r\n      while (true) {\r\n        const { done, value } = await reader.read();\r\n        \r\n        if (done) {\r\n          break;\r\n        }\r\n        \r\n        buffer += decoder.decode(value, { stream: true });\r\n        \r\n        const lines = buffer.split('\\n\\n');\r\n        buffer = lines.pop() || '';\r\n        \r\n        for (const line of lines) {\r\n          if (line.startsWith('data: ')) {\r\n            try {\r\n              const data = JSON.parse(line.slice(6));\r\n              \r\n              setMessages(prev => \r\n                prev.map(msg => \r\n                  msg.id === messageId \r\n                    ? { \r\n                        ...msg, \r\n                        content: msg.content + (data.content || ''),\r\n                        ...(data.finished ? { isStreaming: false } : {})\r\n                      } \r\n                    : msg\r\n                )\r\n              );\r\n              \r\n              if (data.error) {\r\n                throw new Error(data.error);\r\n              }\r\n            } catch (e) {\r\n              console.error('Error parsing SSE data:', e);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      \r\n      setMessages(prev => \r\n        prev.map(msg => \r\n          msg.id === messageId \r\n            ? { ...msg, isStreaming: false } \r\n            : msg\r\n        )\r\n      );\r\n      \r\n    } catch (error) {\r\n      console.error('Error in streaming response:', error);\r\n      setMessages(prev => \r\n        prev.map(msg => \r\n          msg.id === messageId \r\n            ? { ...msg, content: msg.content + '\\n\\n[连接中断] ' + error.message, isStreaming: false } \r\n            : msg\r\n        )\r\n      );\r\n    }\r\n  };\r\n  \r\n  const simulateStreamingResponse = async (message, messageId) => {\r\n    try {\r\n      const words = `这是一个模拟回应。目前无法连接到后端服务器，所以显示这条测试消息。您的问题是关于: \"${message}\"。请确保后端服务器正在运行，并且可以从前端访问API端点 /api/chat。`;\r\n      const wordArray = words.split(' ');\r\n      \r\n      for (let i = 0; i < wordArray.length; i++) {\r\n        setMessages(prev => \r\n          prev.map(msg => \r\n            msg.id === messageId \r\n              ? { \r\n                  ...msg, \r\n                  content: msg.content + (i > 0 ? ' ' : '') + wordArray[i],\r\n                  ...(i === wordArray.length - 1 ? { isStreaming: false } : {})\r\n                } \r\n              : msg\r\n          )\r\n        );\r\n        \r\n        await new Promise(resolve => setTimeout(resolve, 50));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error in simulation:', error);\r\n      setMessages(prev => \r\n        prev.map(msg => \r\n          msg.id === messageId \r\n            ? { ...msg, content: '获取回应时出错', isStreaming: false } \r\n            : msg\r\n        )\r\n      );\r\n    }\r\n  };\r\n  \r\n  const handleSubmit = async (e) => {\r\n    if (e) e.preventDefault();\r\n    \r\n    if (!input.trim() || isLoading) return;\r\n    \r\n    const userMessage = {\r\n      role: 'user',\r\n      content: input,\r\n      timestamp: new Date().toLocaleTimeString()\r\n    };\r\n    \r\n    setMessages(prev => [...prev, userMessage]);\r\n    setInput('');\r\n    setIsLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      const aiMessageId = Date.now();\r\n      setMessages(prev => [...prev, {\r\n        id: aiMessageId,\r\n        role: 'assistant',\r\n        content: '',\r\n        timestamp: new Date().toLocaleTimeString(),\r\n        isStreaming: true\r\n      }]);\r\n      \r\n      try {\r\n        await getStreamingResponse(userMessage.content, aiMessageId);\r\n      } catch (apiError) {\r\n        console.warn('无法连接到后端API，使用模拟模式:', apiError);\r\n        await simulateStreamingResponse(userMessage.content, aiMessageId);\r\n      }\r\n      \r\n    } catch (err) {\r\n      setError('连接服务器失败，请稍后再试');\r\n      console.error('Error:', err);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n  \r\n  const handleKeyDown = (e) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSubmit();\r\n    }\r\n  };\r\n  \r\n  // 海洋背景动画元素\r\n  const renderOceanElements = () => {\r\n    return (\r\n      <>\r\n        {[...Array(20)].map((_, i) => (\r\n          <div \r\n            key={i}\r\n            className=\"absolute rounded-full animate-pulse\"\r\n            style={{\r\n              top: `${Math.random() * 100}%`,\r\n              left: `${Math.random() * 100}%`,\r\n              width: `${Math.random() * 10 + 2}px`,\r\n              height: `${Math.random() * 10 + 2}px`,\r\n              backgroundColor: i % 3 === 0 \r\n                ? '#00FFFF' \r\n                : i % 3 === 1 \r\n                  ? '#00BFFF' \r\n                  : '#1E90FF',\r\n              opacity: Math.random() * 0.5 + 0.2,\r\n              animationDuration: `${Math.random() * 5 + 3}s`,\r\n              zIndex: 0\r\n            }}\r\n          />\r\n        ))}\r\n        \r\n        <div className=\"absolute bottom-0 left-0 w-full overflow-hidden z-0\">\r\n          <svg \r\n            className=\"relative block w-[calc(100%+1.3px)] h-[80px]\"\r\n            data-name=\"Layer 1\" \r\n            xmlns=\"http://www.w3.org/2000/svg\" \r\n            viewBox=\"0 0 1200 120\" \r\n            preserveAspectRatio=\"none\"\r\n          >\r\n            <path \r\n              d=\"M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z\" \r\n              className=\"fill-current text-blue-500 opacity-30\" \r\n            ></path>\r\n            <path \r\n              d=\"M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z\" \r\n              className=\"fill-current text-teal-400 opacity-40\" \r\n            ></path>\r\n            <path \r\n              d=\"M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z\" \r\n              className=\"fill-current text-cyan-300 opacity-30\" \r\n            ></path>\r\n          </svg>\r\n        </div>\r\n      </>\r\n    );\r\n  };\r\n  \r\n  return (\r\n    <div className=\"flex flex-col h-screen bg-gradient-to-br from-[#0a192f] via-[#0c2a4a] to-[#0a3d62] overflow-hidden\">\r\n      {/* 顶部导航栏 */}\r\n      <div className=\"bg-[rgba(10,25,47,0.8)] backdrop-blur-md border-b border-cyan-500/30 p-4 flex items-center justify-between z-10\">\r\n        <div className=\"flex items-center\">\r\n          <div className=\"bg-cyan-500/10 p-2 rounded-full border border-cyan-400/30 mr-3\">\r\n            <div className=\"text-xl text-cyan-400\">🌊</div>\r\n          </div>\r\n          <h1 className=\"text-xl font-bold text-white\">智慧海洋牧场 AI 助手</h1>\r\n        </div>\r\n        <div className=\"text-cyan-300 text-sm\">\r\n          智能对话 · 海洋养殖 · 数据分析\r\n        </div>\r\n      </div>\r\n      \r\n      {/* 背景动画元素 */}\r\n      <div className=\"absolute inset-0 z-0 overflow-hidden\">\r\n        {renderOceanElements()}\r\n      </div>\r\n      \r\n      {/* 聊天消息区域 */}\r\n      <div \r\n        ref={messageContainerRef}\r\n        className=\"flex-1 p-6 overflow-y-auto relative z-10\"\r\n      >\r\n        {messages.length === 0 ? (\r\n          <div className=\"flex flex-col items-center justify-center h-full text-center z-10 relative\">\r\n            <div className=\"bg-cyan-500/10 p-6 rounded-full border border-cyan-400/30 mb-6\">\r\n              <div className=\"text-6xl text-cyan-400\">🌊</div>\r\n            </div>\r\n            <h2 className=\"text-3xl font-bold text-white mb-3\">欢迎使用智慧海洋牧场 AI 助手</h2>\r\n            <p className=\"text-cyan-200 max-w-lg mb-8\">\r\n              我是您的海洋养殖智能助手，可以回答关于海洋牧场建设、养殖技术、环境监测等专业问题\r\n            </p>\r\n            \r\n            <div className=\"grid grid-cols-2 gap-4 max-w-lg w-full\">\r\n              <div className=\"bg-[rgba(10,25,47,0.7)] border border-cyan-500/30 rounded-xl p-4 text-left cursor-pointer hover:bg-[rgba(10,25,47,0.9)] transition-colors\">\r\n                <div className=\"text-cyan-400 text-lg mb-2\">📊 数据分析</div>\r\n                <p className=\"text-sm text-cyan-200\">如何分析海洋牧场水质数据？</p>\r\n              </div>\r\n              <div className=\"bg-[rgba(10,25,47,0.7)] border border-cyan-500/30 rounded-xl p-4 text-left cursor-pointer hover:bg-[rgba(10,25,47,0.9)] transition-colors\">\r\n                <div className=\"text-cyan-400 text-lg mb-2\">🐟 养殖技术</div>\r\n                <p className=\"text-sm text-cyan-200\">深海网箱养殖的最佳实践是什么？</p>\r\n              </div>\r\n              <div className=\"bg-[rgba(10,25,47,0.7)] border border-cyan-500/30 rounded-xl p-4 text-left cursor-pointer hover:bg-[rgba(10,25,47,0.9)] transition-colors\">\r\n                <div className=\"text-cyan-400 text-lg mb-2\">📈 环境监测</div>\r\n                <p className=\"text-sm text-cyan-200\">如何监测海洋牧场的生态环境？</p>\r\n              </div>\r\n              <div className=\"bg-[rgba(10,25,47,0.7)] border border-cyan-500/30 rounded-xl p-4 text-left cursor-pointer hover:bg-[rgba(10,25,47,0.9)] transition-colors\">\r\n                <div className=\"text-cyan-400 text-lg mb-2\">🤖 AI应用</div>\r\n                <p className=\"text-sm text-cyan-200\">AI在海洋养殖中有哪些创新应用？</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4 max-w-4xl mx-auto\">\r\n            {messages.map((message, index) => (\r\n              <div \r\n                key={index}\r\n                className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}\r\n              >\r\n                <div \r\n                  className={`max-w-3/4 rounded-2xl p-4 relative overflow-hidden ${\r\n                    message.role === 'user' \r\n                      ? 'bg-gradient-to-r from-cyan-600 to-blue-700 text-white' \r\n                      : 'bg-[rgba(255,255,255,0.1)] backdrop-blur-sm border border-cyan-500/30 text-white'\r\n                  }`}\r\n                >\r\n                  {/* 消息装饰效果 */}\r\n                  {message.role === 'assistant' && (\r\n                    <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-cyan-400 to-transparent\"></div>\r\n                  )}\r\n                  \r\n                  <div className=\"flex items-start\">\r\n                    {message.role === 'assistant' && (\r\n                      <div className=\"bg-cyan-500/20 p-2 rounded-full mr-3\">\r\n                        <div className=\"text-cyan-300\">🤖</div>\r\n                      </div>\r\n                    )}\r\n                    \r\n                    <div className=\"flex-1\">\r\n                      {message.role === 'user' ? (\r\n                        <div className=\"whitespace-pre-wrap\">{message.content}</div>\r\n                      ) : (\r\n                        <div className=\"markdown-content\">\r\n                          <ReactMarkdown className=\"prose prose-invert prose-cyan\">\r\n                            {message.content}\r\n                          </ReactMarkdown>\r\n                        </div>\r\n                      )}\r\n                      \r\n                      {message.isStreaming && (\r\n                        <div className=\"mt-2\">\r\n                          <div className=\"flex space-x-1\">\r\n                            <div className=\"h-2 w-2 bg-cyan-400 rounded-full animate-bounce\" style={{animationDelay: '-0.32s'}}></div>\r\n                            <div className=\"h-2 w-2 bg-cyan-400 rounded-full animate-bounce\" style={{animationDelay: '-0.16s'}}></div>\r\n                            <div className=\"h-2 w-2 bg-cyan-400 rounded-full animate-bounce\"></div>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                      \r\n                      <div className={`text-xs mt-2 ${message.role === 'user' ? 'text-blue-200' : 'text-cyan-300'}`}>\r\n                        {message.role === 'user' ? '用户' : '海洋AI助手'} · {message.timestamp}\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    {message.role === 'user' && (\r\n                      <div className=\"bg-blue-600/30 p-2 rounded-full ml-3\">\r\n                        <div className=\"text-blue-200\">👤</div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n            <div ref={messagesEndRef} />\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      {error && (\r\n        <div className=\"bg-red-500/20 border border-red-500/40 text-red-300 px-4 py-3 rounded-lg mx-6 mb-4 max-w-4xl mx-auto z-10 relative\">\r\n          <p>{error}</p>\r\n        </div>\r\n      )}\r\n      \r\n      <div className=\"border-t border-cyan-500/30 p-4 bg-[rgba(10,25,47,0.8)] backdrop-blur-md z-10\">\r\n        <form onSubmit={handleSubmit} className=\"max-w-4xl mx-auto\">\r\n          <div className=\"flex space-x-3 items-end\">\r\n            <div className=\"flex-1 relative\">\r\n              <textarea\r\n                value={input}\r\n                onChange={handleInputChange}\r\n                onKeyDown={handleKeyDown}\r\n                disabled={isLoading}\r\n                placeholder=\"请输入关于海洋养殖的问题...\"\r\n                rows={1}\r\n                className=\"w-full border border-cyan-500/50 bg-[rgba(10,40,70,0.5)] text-white rounded-2xl px-4 py-3 pr-12 focus:outline-none focus:ring-2 focus:ring-cyan-500 resize-none\"\r\n                style={{ minHeight: '56px' }}\r\n              />\r\n              <div className=\"absolute right-3 bottom-3 text-gray-400 text-sm\">\r\n                Shift + Enter 换行\r\n              </div>\r\n            </div>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isLoading || !input.trim()}\r\n              className={`h-14 w-14 flex items-center justify-center rounded-full ${\r\n                isLoading || !input.trim()\r\n                  ? 'bg-gray-600 text-gray-500 cursor-not-allowed'\r\n                  : 'bg-gradient-to-r from-cyan-500 to-blue-600 text-white hover:from-cyan-600 hover:to-blue-700'\r\n              } transition-all`}\r\n            >\r\n              {isLoading ? (\r\n                <div className=\"flex space-x-1\">\r\n                  <div className=\"h-2 w-2 bg-white rounded-full animate-bounce\" style={{animationDelay: '-0.32s'}}></div>\r\n                  <div className=\"h-2 w-2 bg-white rounded-full animate-bounce\" style={{animationDelay: '-0.16s'}}></div>\r\n                  <div className=\"h-2 w-2 bg-white rounded-full animate-bounce\"></div>\r\n                </div>\r\n              ) : (\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"w-6 h-6\">\r\n                  <path d=\"M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z\" />\r\n                </svg>\r\n              )}\r\n            </button>\r\n          </div>\r\n          <div className=\"mt-3 flex justify-center\">\r\n            <div className=\"text-xs text-cyan-400/70 flex items-center\">\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"w-4 h-4 mr-1\">\r\n                <path fillRule=\"evenodd\" d=\"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z\" clipRule=\"evenodd\" />\r\n              </svg>\r\n              智慧海洋牧场 AI 助手 · 提供专业海洋养殖咨询\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      \r\n      {/* 全局动画样式 */}\r\n      <style jsx>{`\r\n        @keyframes fadeIn {\r\n          from { opacity: 0; }\r\n          to { opacity: 1; }\r\n        }\r\n        \r\n        @keyframes fadeInUp {\r\n          from { \r\n            opacity: 0;\r\n            transform: translateY(20px);\r\n          }\r\n          to { \r\n            opacity: 1;\r\n            transform: translateY(0);\r\n          }\r\n        }\r\n        \r\n        @keyframes wiggle {\r\n          0%, 100% { transform: rotate(0deg); }\r\n          25% { transform: rotate(5deg); }\r\n          50% { transform: rotate(-5deg); }\r\n          75% { transform: rotate(5deg); }\r\n        }\r\n        \r\n        .animate-wiggle {\r\n          animation: wiggle 8s infinite;\r\n        }\r\n        \r\n        .animate-bounce {\r\n          animation: bounce 1.5s infinite;\r\n        }\r\n        \r\n        @keyframes bounce {\r\n          0%, 100% { transform: translateY(0); }\r\n          50% { transform: translateY(-5px); }\r\n        }\r\n        \r\n        .prose-cyan a {\r\n          color: #06b6d4;\r\n          text-decoration: underline;\r\n          text-decoration-color: rgba(6, 182, 212, 0.3);\r\n        }\r\n        \r\n        .prose-cyan code {\r\n          background-color: rgba(6, 182, 212, 0.15);\r\n          color: #06b6d4;\r\n          padding: 0.2em 0.4em;\r\n          border-radius: 0.25em;\r\n        }\r\n        \r\n        .prose-cyan pre {\r\n          background-color: rgba(10, 25, 47, 0.8);\r\n          border: 1px solid rgba(6, 182, 212, 0.3);\r\n          border-radius: 0.5rem;\r\n          padding: 1rem;\r\n          overflow-x: auto;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}