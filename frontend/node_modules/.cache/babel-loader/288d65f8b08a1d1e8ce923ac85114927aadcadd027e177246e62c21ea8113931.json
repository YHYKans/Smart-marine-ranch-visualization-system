{"ast":null,"code":"import{useState,useEffect}from'react';import{Table,Alert,Card,DatePicker,Button,Space,Tag,Modal,Form,InputNumber,message}from'antd';import axios from'axios';import moment from'moment';import{LineChart,Line,XAxis,YAxis,CartesianGrid,Tooltip,Legend,ResponsiveContainer,BarChart,Bar}from'recharts';import{AimOutlined,ExperimentOutlined,SettingOutlined,WarningOutlined,EnvironmentOutlined// 替换 WaterOutlined 为 EnvironmentOutlined\n}from'@ant-design/icons';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const{RangePicker}=DatePicker;function WaterQualityAnomalyDetection(){const[isLoading,setIsLoading]=useState(false);const[anomalies,setAnomalies]=useState([]);const[totalRecords,setTotalRecords]=useState(0);const[anomalyCount,setAnomalyCount]=useState(0);const[thresholds,setThresholds]=useState([]);const[thresholdModalVisible,setThresholdModalVisible]=useState(false);const[thresholdForm]=Form.useForm();const[stats,setStats]=useState(null);const[activeTab,setActiveTab]=useState('anomalies');const defaultDateRange=[moment('2020-05-01T00:00:00'),moment('2021-04-05T23:59:59')];useEffect(()=>{fetchThresholds();detectAnomalies(defaultDateRange);},[]);// 获取阈值数据\nconst fetchThresholds=async()=>{try{const response=await axios.get('http://localhost:3001/api/water-quality/thresholds');setThresholds(response.data);const formValues={};response.data.forEach(item=>{formValues[`lower_${item.parameter}`]=item.lower_threshold;formValues[`upper_${item.parameter}`]=item.upper_threshold;});thresholdForm.setFieldsValue(formValues);}catch(error){console.error('获取阈值失败:',error);message.error('获取阈值失败，请重试');}};// 检测水质数据异常\nconst detectAnomalies=async dateRange=>{setIsLoading(true);try{const startDate=dateRange&&dateRange[0]?dateRange[0].format('YYYY-MM-DD'):'';const endDate=dateRange&&dateRange[1]?dateRange[1].format('YYYY-MM-DD'):'';const response=await axios.get('http://localhost:3001/api/water-quality/detect-anomalies',{params:{start_date:startDate,end_date:endDate}});setAnomalies(response.data.anomalies);setTotalRecords(response.data.total_records);setAnomalyCount(response.data.anomaly_count);setStats(response.data.stats);}catch(error){console.error('检测异常失败:',error);message.error('检测异常失败，请重试');}finally{setIsLoading(false);}};// 打开阈值设置模态框\nconst openThresholdModal=()=>{setThresholdModalVisible(true);};// 关闭阈值设置模态框\nconst closeThresholdModal=()=>{setThresholdModalVisible(false);};// 保存阈值设置\nconst saveThresholds=async()=>{try{const values=await thresholdForm.validateFields();const thresholdData=thresholds.map(item=>({parameter:item.parameter,lower_threshold:parseFloat(values[`lower_${item.parameter}`]),upper_threshold:parseFloat(values[`upper_${item.parameter}`])}));await axios.put('http://localhost:3001/api/water-quality/thresholds',thresholdData);message.success('阈值设置已保存');setThresholdModalVisible(false);fetchThresholds();}catch(errorInfo){console.error('验证失败:',errorInfo);message.error('请检查输入是否正确');}};const columns=[{title:'记录ID',dataIndex:'record_id',key:'record_id',width:100,render:text=>/*#__PURE__*/_jsxs(\"span\",{className:\"text-cyan-500 font-mono\",children:[\"#\",text]})},{title:'监测站点',dataIndex:'site_id',key:'site_id',width:120,render:text=>/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-400\",children:text})},{title:'监测日期',dataIndex:'monitoring_date',key:'monitoring_date',width:140},{title:'监测时间',dataIndex:'monitoring_time',key:'monitoring_time',width:140},{title:'监测断面',dataIndex:'section_name',key:'section_name',ellipsis:true,width:200,render:text=>/*#__PURE__*/_jsx(\"span\",{className:\"text-teal-300\",children:text})},{title:'异常原因',dataIndex:'anomaly_reasons',key:'anomaly_reasons',render:reasons=>/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-1\",children:reasons.map((reason,index)=>/*#__PURE__*/_jsx(Tag,{className:\"bg-red-500/20 border border-red-500/40 text-red-300 rounded-full px-3 py-1\",children:reason},index))})}];// 参数图表数据准备\nconst prepareChartData=()=>{if(!stats||!stats.parameters)return[];return stats.parameters.map(param=>{const threshold=thresholds.find(t=>t.parameter===param.name);return{name:param.name,avg:param.avg,min:param.min,max:param.max,lower_threshold:(threshold===null||threshold===void 0?void 0:threshold.lower_threshold)||0,upper_threshold:(threshold===null||threshold===void 0?void 0:threshold.upper_threshold)||0};});};const chartData=prepareChartData();return/*#__PURE__*/_jsxs(\"div\",{className:\"water-quality-anomaly-detection min-h-screen bg-gradient-to-b from-[#0a192f] to-[#0c2a4a] p-6 text-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-8\",children:[/*#__PURE__*/_jsx(EnvironmentOutlined,{className:\"text-4xl text-cyan-400 mr-4\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-cyan-300 to-teal-300\",children:\"\\u6C34\\u8D28\\u6570\\u636E\\u5F02\\u5E38\\u68C0\\u6D4B\\u7CFB\\u7EDF\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-cyan-300 mt-1\",children:\"\\u57FA\\u4E8E\\u4EBA\\u5DE5\\u667A\\u80FD\\u7684\\u6C34\\u8D28\\u5F02\\u5E38\\u8BC6\\u522B\\u4E0E\\u5206\\u6790\\u5E73\\u53F0\"})]})]}),/*#__PURE__*/_jsxs(Card,{className:\"mb-6 border border-cyan-500/30 bg-[rgba(10,25,47,0.7)] backdrop-blur-md\",title:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(AimOutlined,{className:\"text-cyan-400 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-cyan-300\",children:\"\\u6C34\\u8D28\\u5F02\\u5E38\\u68C0\\u6D4B\"})]}),headStyle:{borderBottom:'1px solid rgba(0, 230, 255, 0.2)',color:'#6df7e1'},children:[/*#__PURE__*/_jsxs(Space,{className:\"w-full\",children:[/*#__PURE__*/_jsx(RangePicker,{showTime:true,format:\"YYYY-MM-DD HH:mm:ss\",placeholder:['开始日期','结束日期'],defaultValue:defaultDateRange,onOk:detectAnomalies,className:\"custom-range-picker\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:()=>detectAnomalies(),loading:isLoading,className:\"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 border-0 text-white font-bold\",icon:/*#__PURE__*/_jsx(ExperimentOutlined,{}),children:\"\\u68C0\\u6D4B\\u5F02\\u5E38\"}),/*#__PURE__*/_jsx(Button,{onClick:openThresholdModal,className:\"bg-[rgba(10,40,70,0.5)] border border-cyan-500/30 text-cyan-300 hover:bg-[rgba(10,40,70,0.7)]\",icon:/*#__PURE__*/_jsx(SettingOutlined,{}),children:\"\\u8BBE\\u7F6E\\u9608\\u503C\"})]}),totalRecords>0&&/*#__PURE__*/_jsx(Alert,{message:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(WarningOutlined,{className:\"mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u68C0\\u6D4B\\u7ED3\\u679C\\uFF1A\\u5171\",/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-teal-300 mx-1\",children:totalRecords}),\"\\u6761\\u6570\\u636E\\uFF0C\",/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-red-400 mx-1\",children:anomalyCount}),\"\\u6761\\u5F02\\u5E38\"]})]}),type:anomalyCount>0?'warning':'success',showIcon:false,className:\"mt-4 bg-[rgba(255,255,255,0.05)] border border-cyan-500/30\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\",children:[/*#__PURE__*/_jsx(Card,{className:\"border border-cyan-500/30 bg-[rgba(10,25,47,0.7)] backdrop-blur-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-cyan-400 text-4xl mb-2\",children:\"\\uD83C\\uDF0A\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-cyan-300 mb-1\",children:\"\\u76D1\\u6D4B\\u7AD9\\u70B9\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-teal-300\",children:(stats===null||stats===void 0?void 0:stats.sites)||0})]})}),/*#__PURE__*/_jsx(Card,{className:\"border border-cyan-500/30 bg-[rgba(10,25,47,0.7)] backdrop-blur-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-cyan-400 text-4xl mb-2\",children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-cyan-300 mb-1\",children:\"\\u6570\\u636E\\u603B\\u91CF\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-teal-300\",children:totalRecords})]})}),/*#__PURE__*/_jsx(Card,{className:\"border border-cyan-500/30 bg-[rgba(10,25,47,0.7)] backdrop-blur-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-cyan-400 text-4xl mb-2\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-cyan-300 mb-1\",children:\"\\u5F02\\u5E38\\u6570\\u636E\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-red-400\",children:anomalyCount})]})}),/*#__PURE__*/_jsx(Card,{className:\"border border-cyan-500/30 bg-[rgba(10,25,47,0.7)] backdrop-blur-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-cyan-400 text-4xl mb-2\",children:\"\\uD83D\\uDCC8\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-cyan-300 mb-1\",children:\"\\u5F02\\u5E38\\u6BD4\\u4F8B\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-teal-300\",children:[totalRecords>0?(anomalyCount/totalRecords*100).toFixed(2):0,\"%\"]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex mb-4 border-b border-cyan-500/30\",children:[/*#__PURE__*/_jsx(\"button\",{className:`px-4 py-2 font-medium ${activeTab==='anomalies'?'text-cyan-300 border-b-2 border-cyan-400':'text-cyan-200 hover:text-cyan-300'}`,onClick:()=>setActiveTab('anomalies'),children:\"\\u5F02\\u5E38\\u6570\\u636E\\u5217\\u8868\"}),/*#__PURE__*/_jsx(\"button\",{className:`px-4 py-2 font-medium ${activeTab==='analysis'?'text-cyan-300 border-b-2 border-cyan-400':'text-cyan-200 hover:text-cyan-300'}`,onClick:()=>setActiveTab('analysis'),children:\"\\u6C34\\u8D28\\u5206\\u6790\\u56FE\\u8868\"}),/*#__PURE__*/_jsx(\"button\",{className:`px-4 py-2 font-medium ${activeTab==='distribution'?'text-cyan-300 border-b-2 border-cyan-400':'text-cyan-200 hover:text-cyan-300'}`,onClick:()=>setActiveTab('distribution'),children:\"\\u5F02\\u5E38\\u5206\\u5E03\"})]}),activeTab==='anomalies'&&/*#__PURE__*/_jsx(Card,{className:\"border border-cyan-500/30 bg-[rgba(10,25,47,0.7)] backdrop-blur-md\",title:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-cyan-300\",children:\"\\u6C34\\u8D28\\u5F02\\u5E38\\u6570\\u636E\\u5217\\u8868\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 bg-red-500/20 text-red-300 px-2 py-1 rounded-full text-xs\",children:[anomalies.length,\" \\u6761\\u8BB0\\u5F55\"]})]}),headStyle:{borderBottom:'1px solid rgba(0, 230, 255, 0.2)',color:'#6df7e1'},children:anomalies.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-10\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-cyan-300 text-xl mb-4\",children:\"\\uD83C\\uDF89 \\u672A\\u68C0\\u6D4B\\u5230\\u5F02\\u5E38\\u6570\\u636E\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-cyan-200\",children:\"\\u5F53\\u524D\\u6570\\u636E\\u8303\\u56F4\\u5185\\u6C34\\u8D28\\u6307\\u6807\\u5747\\u5728\\u6B63\\u5E38\\u9608\\u503C\\u5185\"})]}):/*#__PURE__*/_jsx(Table,{dataSource:anomalies,columns:columns,rowKey:\"record_id\",pagination:{pageSize:10},loading:isLoading,className:\"custom-table\",scroll:{x:1000}})}),activeTab==='analysis'&&chartData.length>0&&/*#__PURE__*/_jsx(Card,{className:\"border border-cyan-500/30 bg-[rgba(10,25,47,0.7)] backdrop-blur-md mb-6\",title:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-cyan-300\",children:\"\\u6C34\\u8D28\\u53C2\\u6570\\u5206\\u6790\"})}),headStyle:{borderBottom:'1px solid rgba(0, 230, 255, 0.2)',color:'#6df7e1'},children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:400,children:/*#__PURE__*/_jsxs(BarChart,{data:chartData,margin:{top:20,right:30,left:20,bottom:50},children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\",stroke:\"#2c3e50\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"name\",stroke:\"#6df7e1\",angle:-45,textAnchor:\"end\",height:70}),/*#__PURE__*/_jsx(YAxis,{stroke:\"#6df7e1\"}),/*#__PURE__*/_jsx(Tooltip,{contentStyle:{backgroundColor:'rgba(10,25,47,0.9)',border:'1px solid rgba(0, 230, 255, 0.3)',borderRadius:'8px'},itemStyle:{color:'#6df7e1'}}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"avg\",name:\"\\u5E73\\u5747\\u503C\",fill:\"#0ea5e9\"}),/*#__PURE__*/_jsx(Bar,{dataKey:\"min\",name:\"\\u6700\\u5C0F\\u503C\",fill:\"#22d3ee\"}),/*#__PURE__*/_jsx(Bar,{dataKey:\"max\",name:\"\\u6700\\u5927\\u503C\",fill:\"#2dd4bf\"}),/*#__PURE__*/_jsx(Bar,{dataKey:\"lower_threshold\",name:\"\\u9608\\u503C\\u4E0B\\u9650\",fill:\"#ef4444\"}),/*#__PURE__*/_jsx(Bar,{dataKey:\"upper_threshold\",name:\"\\u9608\\u503C\\u4E0A\\u9650\",fill:\"#ef4444\"})]})})}),activeTab==='distribution'&&stats&&stats.anomaly_distribution&&/*#__PURE__*/_jsx(Card,{className:\"border border-cyan-500/30 bg-[rgba(10,25,47,0.7)] backdrop-blur-md\",title:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-cyan-300\",children:\"\\u5F02\\u5E38\\u6570\\u636E\\u5206\\u5E03\"})}),headStyle:{borderBottom:'1px solid rgba(0, 230, 255, 0.2)',color:'#6df7e1'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-cyan-300 mb-4 text-center\",children:\"\\u6309\\u76D1\\u6D4B\\u7AD9\\u70B9\\u5206\\u5E03\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(BarChart,{data:stats.anomaly_distribution.by_site,margin:{top:20,right:30,left:20,bottom:50},children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\",stroke:\"#2c3e50\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"site\",stroke:\"#6df7e1\"}),/*#__PURE__*/_jsx(YAxis,{stroke:\"#6df7e1\"}),/*#__PURE__*/_jsx(Tooltip,{contentStyle:{backgroundColor:'rgba(10,25,47,0.9)',border:'1px solid rgba(0, 230, 255, 0.3)',borderRadius:'8px'}}),/*#__PURE__*/_jsx(Bar,{dataKey:\"count\",name:\"\\u5F02\\u5E38\\u6B21\\u6570\",fill:\"#ef4444\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-cyan-300 mb-4 text-center\",children:\"\\u6309\\u5F02\\u5E38\\u53C2\\u6570\\u5206\\u5E03\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(BarChart,{data:stats.anomaly_distribution.by_parameter,margin:{top:20,right:30,left:20,bottom:50},children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\",stroke:\"#2c3e50\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"parameter\",stroke:\"#6df7e1\"}),/*#__PURE__*/_jsx(YAxis,{stroke:\"#6df7e1\"}),/*#__PURE__*/_jsx(Tooltip,{contentStyle:{backgroundColor:'rgba(10,25,47,0.9)',border:'1px solid rgba(0, 230, 255, 0.3)',borderRadius:'8px'}}),/*#__PURE__*/_jsx(Bar,{dataKey:\"count\",name:\"\\u5F02\\u5E38\\u6B21\\u6570\",fill:\"#f97316\"})]})})]})]})}),/*#__PURE__*/_jsx(Modal,{title:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(SettingOutlined,{className:\"text-cyan-400 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-cyan-300\",children:\"\\u6C34\\u8D28\\u6307\\u6807\\u9608\\u503C\\u8BBE\\u7F6E\"})]}),visible:thresholdModalVisible,onCancel:closeThresholdModal,footer:[/*#__PURE__*/_jsx(Button,{onClick:closeThresholdModal,className:\"text-cyan-300\",children:\"\\u53D6\\u6D88\"},\"cancel\"),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:saveThresholds,loading:isLoading,className:\"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 border-0 text-white font-bold\",children:\"\\u4FDD\\u5B58\\u8BBE\\u7F6E\"},\"save\")],width:800,className:\"custom-modal\",bodyStyle:{backgroundColor:'rgba(10,25,47,0.9)',border:'1px solid rgba(0, 230, 255, 0.3)'},children:/*#__PURE__*/_jsxs(Form,{form:thresholdForm,layout:\"vertical\",initialValues:{remember:true},children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-4 text-lg font-semibold text-cyan-300\",children:\"\\u6C34\\u8D28\\u6307\\u6807\\u9608\\u503C\"}),thresholds.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 pb-6 border-b border-cyan-500/30\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"mb-3 text-md font-medium text-teal-300 flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-3 h-3 bg-cyan-500 rounded-full mr-2\"}),item.parameter]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(Form.Item,{label:/*#__PURE__*/_jsx(\"span\",{className:\"text-cyan-200\",children:\"\\u4E0B\\u9650\\u503C\"}),name:`lower_${item.parameter}`,rules:[{required:true,message:'请输入下限值'},{validator(_,value){if(isNaN(parseFloat(value))){return Promise.reject('请输入有效的数字');}return Promise.resolve();}},_ref=>{let{getFieldValue}=_ref;return{validator(_,value){const upperValue=getFieldValue(`upper_${item.parameter}`);if(upperValue&&parseFloat(value)>=parseFloat(upperValue)){return Promise.reject('下限值必须小于上限值');}return Promise.resolve();}};}],children:/*#__PURE__*/_jsx(InputNumber,{placeholder:\"\\u8BF7\\u8F93\\u5165\\u4E0B\\u9650\\u503C\",className:\"w-full bg-[rgba(10,40,70,0.5)] border border-cyan-500/50 text-white\",step:0.01})}),/*#__PURE__*/_jsx(Form.Item,{label:/*#__PURE__*/_jsx(\"span\",{className:\"text-cyan-200\",children:\"\\u4E0A\\u9650\\u503C\"}),name:`upper_${item.parameter}`,rules:[{required:true,message:'请输入上限值'},{validator(_,value){if(isNaN(parseFloat(value))){return Promise.reject('请输入有效的数字');}return Promise.resolve();}},_ref2=>{let{getFieldValue}=_ref2;return{validator(_,value){const lowerValue=getFieldValue(`lower_${item.parameter}`);if(lowerValue&&parseFloat(value)<=parseFloat(lowerValue)){return Promise.reject('上限值必须大于下限值');}return Promise.resolve();}};}],children:/*#__PURE__*/_jsx(InputNumber,{placeholder:\"\\u8BF7\\u8F93\\u5165\\u4E0A\\u9650\\u503C\",className:\"w-full bg-[rgba(10,40,70,0.5)] border border-cyan-500/50 text-white\",step:0.01})})]})]},item.parameter))]})})]}),/*#__PURE__*/_jsx(\"style\",{jsx:true,global:true,children:`\n        .water-quality-anomaly-detection {\n          .ant-card {\n            border-radius: 12px;\n            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);\n          }\n          \n          .ant-card-head {\n            background: linear-gradient(90deg, rgba(10, 25, 47, 0.5), rgba(10, 40, 70, 0.3)) !important;\n          }\n          \n          .ant-table {\n            background: transparent;\n            color: #e2e8f0;\n          }\n          \n          .ant-table-thead > tr > th {\n            background: rgba(10, 40, 70, 0.5) !important;\n            color: #6df7e1 !important;\n            border-bottom: 1px solid rgba(0, 230, 255, 0.2) !important;\n          }\n          \n          .ant-table-tbody > tr > td {\n            border-bottom: 1px solid rgba(0, 230, 255, 0.1) !important;\n            background: rgba(10, 25, 47, 0.3) !important;\n          }\n          \n          .ant-table-tbody > tr:hover > td {\n            background: rgba(10, 40, 70, 0.4) !important;\n          }\n          \n          .custom-range-picker .ant-picker {\n            background: rgba(10, 40, 70, 0.5);\n            border: 1px solid rgba(0, 230, 255, 0.3);\n            color: #6df7e1;\n          }\n          \n          .custom-range-picker .ant-picker-input > input {\n            color: #6df7e1;\n          }\n          \n          .custom-range-picker .ant-picker-suffix {\n            color: #6df7e1;\n          }\n          \n          .ant-modal-content {\n            background: linear-gradient(135deg, #0a192f, #0c2a4a) !important;\n            border: 1px solid rgba(0, 230, 255, 0.3) !important;\n            border-radius: 12px !important;\n          }\n          \n          .ant-modal-header {\n            background: rgba(10, 25, 47, 0.7) !important;\n            border-bottom: 1px solid rgba(0, 230, 255, 0.3) !important;\n          }\n          \n          .ant-modal-title {\n            color: #6df7e1 !important;\n          }\n          \n          .ant-modal-close-x {\n            color: #6df7e1 !important;\n          }\n          \n          .ant-input-number {\n            color: #e2e8f0;\n          }\n          \n          .ant-input-number-handler-wrap {\n            background: rgba(10, 40, 70, 0.5);\n          }\n          \n          .ant-tag {\n            margin-right: 0;\n          }\n        }\n      `})]});}export default WaterQualityAnomalyDetection;","map":{"version":3,"names":["useState","useEffect","Table","Alert","Card","DatePicker","Button","Space","Tag","Modal","Form","InputNumber","message","axios","moment","LineChart","Line","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","BarChart","Bar","AimOutlined","ExperimentOutlined","SettingOutlined","WarningOutlined","EnvironmentOutlined","jsxs","_jsxs","jsx","_jsx","RangePicker","WaterQualityAnomalyDetection","isLoading","setIsLoading","anomalies","setAnomalies","totalRecords","setTotalRecords","anomalyCount","setAnomalyCount","thresholds","setThresholds","thresholdModalVisible","setThresholdModalVisible","thresholdForm","useForm","stats","setStats","activeTab","setActiveTab","defaultDateRange","fetchThresholds","detectAnomalies","response","get","data","formValues","forEach","item","parameter","lower_threshold","upper_threshold","setFieldsValue","error","console","dateRange","startDate","format","endDate","params","start_date","end_date","total_records","anomaly_count","openThresholdModal","closeThresholdModal","saveThresholds","values","validateFields","thresholdData","map","parseFloat","put","success","errorInfo","columns","title","dataIndex","key","width","render","text","className","children","ellipsis","reasons","reason","index","prepareChartData","parameters","param","threshold","find","t","name","avg","min","max","chartData","headStyle","borderBottom","color","showTime","placeholder","defaultValue","onOk","type","onClick","loading","icon","showIcon","sites","toFixed","length","dataSource","rowKey","pagination","pageSize","scroll","x","height","margin","top","right","left","bottom","strokeDasharray","stroke","dataKey","angle","textAnchor","contentStyle","backgroundColor","border","borderRadius","itemStyle","fill","anomaly_distribution","by_site","by_parameter","visible","onCancel","footer","bodyStyle","form","layout","initialValues","remember","Item","label","rules","required","validator","_","value","isNaN","Promise","reject","resolve","_ref","getFieldValue","upperValue","step","_ref2","lowerValue","global"],"sources":["D:/软件工程/智慧海洋牧场可视化系统/frontend/src/pages/Check.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { Table, Alert, Card, DatePicker, Button, Space, Tag, Modal, Form, InputNumber, message } from 'antd';\r\nimport axios from 'axios';\r\nimport moment from 'moment';\r\nimport { \r\n  LineChart, \r\n  Line, \r\n  XAxis, \r\n  YAxis, \r\n  CartesianGrid, \r\n  Tooltip, \r\n  Legend, \r\n  ResponsiveContainer,\r\n  BarChart,\r\n  Bar\r\n} from 'recharts';\r\nimport { \r\n  AimOutlined, \r\n  ExperimentOutlined, \r\n  SettingOutlined, \r\n  WarningOutlined,\r\n  EnvironmentOutlined // 替换 WaterOutlined 为 EnvironmentOutlined\r\n} from '@ant-design/icons';\r\n\r\nconst { RangePicker } = DatePicker;\r\n\r\nfunction WaterQualityAnomalyDetection() {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [anomalies, setAnomalies] = useState([]);\r\n  const [totalRecords, setTotalRecords] = useState(0);\r\n  const [anomalyCount, setAnomalyCount] = useState(0);\r\n  const [thresholds, setThresholds] = useState([]);\r\n  const [thresholdModalVisible, setThresholdModalVisible] = useState(false);\r\n  const [thresholdForm] = Form.useForm();\r\n  const [stats, setStats] = useState(null);\r\n  const [activeTab, setActiveTab] = useState('anomalies');\r\n\r\n  const defaultDateRange = [\r\n    moment('2020-05-01T00:00:00'),\r\n    moment('2021-04-05T23:59:59')\r\n  ];\r\n\r\n  useEffect(() => {\r\n    fetchThresholds();\r\n    detectAnomalies(defaultDateRange);\r\n  }, []);\r\n\r\n  // 获取阈值数据\r\n  const fetchThresholds = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:3001/api/water-quality/thresholds');\r\n      setThresholds(response.data);\r\n      \r\n      const formValues = {};\r\n      response.data.forEach(item => {\r\n        formValues[`lower_${item.parameter}`] = item.lower_threshold;\r\n        formValues[`upper_${item.parameter}`] = item.upper_threshold;\r\n      });\r\n      thresholdForm.setFieldsValue(formValues);\r\n    } catch (error) {\r\n      console.error('获取阈值失败:', error);\r\n      message.error('获取阈值失败，请重试');\r\n    }\r\n  };\r\n\r\n  // 检测水质数据异常\r\n  const detectAnomalies = async (dateRange) => {\r\n    setIsLoading(true);\r\n    try {\r\n      const startDate = dateRange && dateRange[0] ? dateRange[0].format('YYYY-MM-DD') : '';\r\n      const endDate = dateRange && dateRange[1] ? dateRange[1].format('YYYY-MM-DD') : '';\r\n      \r\n      const response = await axios.get(\r\n        'http://localhost:3001/api/water-quality/detect-anomalies',\r\n        { params: { start_date: startDate, end_date: endDate } }\r\n      );\r\n      \r\n      setAnomalies(response.data.anomalies);\r\n      setTotalRecords(response.data.total_records);\r\n      setAnomalyCount(response.data.anomaly_count);\r\n      setStats(response.data.stats);\r\n      \r\n    } catch (error) {\r\n      console.error('检测异常失败:', error);\r\n      message.error('检测异常失败，请重试');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // 打开阈值设置模态框\r\n  const openThresholdModal = () => {\r\n    setThresholdModalVisible(true);\r\n  };\r\n\r\n  // 关闭阈值设置模态框\r\n  const closeThresholdModal = () => {\r\n    setThresholdModalVisible(false);\r\n  };\r\n\r\n  // 保存阈值设置\r\n  const saveThresholds = async () => {\r\n    try {\r\n      const values = await thresholdForm.validateFields();\r\n      \r\n      const thresholdData = thresholds.map(item => ({\r\n        parameter: item.parameter,\r\n        lower_threshold: parseFloat(values[`lower_${item.parameter}`]),\r\n        upper_threshold: parseFloat(values[`upper_${item.parameter}`])\r\n      }));\r\n      \r\n      await axios.put('http://localhost:3001/api/water-quality/thresholds', thresholdData);\r\n      \r\n      message.success('阈值设置已保存');\r\n      setThresholdModalVisible(false);\r\n      fetchThresholds();\r\n    } catch (errorInfo) {\r\n      console.error('验证失败:', errorInfo);\r\n      message.error('请检查输入是否正确');\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: '记录ID',\r\n      dataIndex: 'record_id',\r\n      key: 'record_id',\r\n      width: 100,\r\n      render: (text) => <span className=\"text-cyan-500 font-mono\">#{text}</span>\r\n    },\r\n    {\r\n      title: '监测站点',\r\n      dataIndex: 'site_id',\r\n      key: 'site_id',\r\n      width: 120,\r\n      render: (text) => <span className=\"text-blue-400\">{text}</span>\r\n    },\r\n    {\r\n      title: '监测日期',\r\n      dataIndex: 'monitoring_date',\r\n      key: 'monitoring_date',\r\n      width: 140\r\n    },\r\n    {\r\n      title: '监测时间',\r\n      dataIndex: 'monitoring_time',\r\n      key: 'monitoring_time',\r\n      width: 140\r\n    },\r\n    {\r\n      title: '监测断面',\r\n      dataIndex: 'section_name',\r\n      key: 'section_name',\r\n      ellipsis: true,\r\n      width: 200,\r\n      render: (text) => <span className=\"text-teal-300\">{text}</span>\r\n    },\r\n    {\r\n      title: '异常原因',\r\n      dataIndex: 'anomaly_reasons',\r\n      key: 'anomaly_reasons',\r\n      render: (reasons) => (\r\n        <div className=\"flex flex-wrap gap-1\">\r\n          {reasons.map((reason, index) => (\r\n            <Tag \r\n              key={index} \r\n              className=\"bg-red-500/20 border border-red-500/40 text-red-300 rounded-full px-3 py-1\"\r\n            >\r\n              {reason}\r\n            </Tag>\r\n          ))}\r\n        </div>\r\n      )\r\n    }\r\n  ];\r\n\r\n  // 参数图表数据准备\r\n  const prepareChartData = () => {\r\n    if (!stats || !stats.parameters) return [];\r\n    \r\n    return stats.parameters.map(param => {\r\n      const threshold = thresholds.find(t => t.parameter === param.name);\r\n      return {\r\n        name: param.name,\r\n        avg: param.avg,\r\n        min: param.min,\r\n        max: param.max,\r\n        lower_threshold: threshold?.lower_threshold || 0,\r\n        upper_threshold: threshold?.upper_threshold || 0\r\n      };\r\n    });\r\n  };\r\n\r\n  const chartData = prepareChartData();\r\n\r\n  return (\r\n    <div className=\"water-quality-anomaly-detection min-h-screen bg-gradient-to-b from-[#0a192f] to-[#0c2a4a] p-6 text-white\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        {/* 页面标题 - 使用 EnvironmentOutlined 替代 WaterOutlined */}\r\n        <div className=\"flex items-center mb-8\">\r\n          <EnvironmentOutlined className=\"text-4xl text-cyan-400 mr-4\" />\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-cyan-300 to-teal-300\">\r\n              水质数据异常检测系统\r\n            </h1>\r\n            <p className=\"text-cyan-300 mt-1\">基于人工智能的水质异常识别与分析平台</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* 操作卡片 */}\r\n        <Card \r\n          className=\"mb-6 border border-cyan-500/30 bg-[rgba(10,25,47,0.7)] backdrop-blur-md\"\r\n          title={\r\n            <div className=\"flex items-center\">\r\n              <AimOutlined className=\"text-cyan-400 mr-2\" />\r\n              <span className=\"text-cyan-300\">水质异常检测</span>\r\n            </div>\r\n          }\r\n          headStyle={{ borderBottom: '1px solid rgba(0, 230, 255, 0.2)', color: '#6df7e1' }}\r\n        >\r\n          <Space className=\"w-full\">\r\n            <RangePicker \r\n              showTime \r\n              format=\"YYYY-MM-DD HH:mm:ss\" \r\n              placeholder={['开始日期', '结束日期']}\r\n              defaultValue={defaultDateRange}\r\n              onOk={detectAnomalies}\r\n              className=\"custom-range-picker\"\r\n            />\r\n            <Button \r\n              type=\"primary\" \r\n              onClick={() => detectAnomalies()}\r\n              loading={isLoading}\r\n              className=\"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 border-0 text-white font-bold\"\r\n              icon={<ExperimentOutlined />}\r\n            >\r\n              检测异常\r\n            </Button>\r\n            <Button \r\n              onClick={openThresholdModal}\r\n              className=\"bg-[rgba(10,40,70,0.5)] border border-cyan-500/30 text-cyan-300 hover:bg-[rgba(10,40,70,0.7)]\"\r\n              icon={<SettingOutlined />}\r\n            >\r\n              设置阈值\r\n            </Button>\r\n          </Space>\r\n          \r\n          {totalRecords > 0 && (\r\n            <Alert\r\n              message={\r\n                <div className=\"flex items-center\">\r\n                  <WarningOutlined className=\"mr-2\" />\r\n                  <span>\r\n                    检测结果：共<span className=\"font-bold text-teal-300 mx-1\">{totalRecords}</span>条数据，\r\n                    <span className=\"font-bold text-red-400 mx-1\">{anomalyCount}</span>条异常\r\n                  </span>\r\n                </div>\r\n              }\r\n              type={anomalyCount > 0 ? 'warning' : 'success'}\r\n              showIcon={false}\r\n              className=\"mt-4 bg-[rgba(255,255,255,0.05)] border border-cyan-500/30\"\r\n            />\r\n          )}\r\n        </Card>\r\n\r\n        {/* 数据概览卡片 */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\r\n          <Card className=\"border border-cyan-500/30 bg-[rgba(10,25,47,0.7)] backdrop-blur-md\">\r\n            <div className=\"text-center\">\r\n              <div className=\"text-cyan-400 text-4xl mb-2\">🌊</div>\r\n              <h3 className=\"text-cyan-300 mb-1\">监测站点</h3>\r\n              <p className=\"text-2xl font-bold text-teal-300\">{stats?.sites || 0}</p>\r\n            </div>\r\n          </Card>\r\n          \r\n          <Card className=\"border border-cyan-500/30 bg-[rgba(10,25,47,0.7)] backdrop-blur-md\">\r\n            <div className=\"text-center\">\r\n              <div className=\"text-cyan-400 text-4xl mb-2\">📊</div>\r\n              <h3 className=\"text-cyan-300 mb-1\">数据总量</h3>\r\n              <p className=\"text-2xl font-bold text-teal-300\">{totalRecords}</p>\r\n            </div>\r\n          </Card>\r\n          \r\n          <Card className=\"border border-cyan-500/30 bg-[rgba(10,25,47,0.7)] backdrop-blur-md\">\r\n            <div className=\"text-center\">\r\n              <div className=\"text-cyan-400 text-4xl mb-2\">⚠️</div>\r\n              <h3 className=\"text-cyan-300 mb-1\">异常数据</h3>\r\n              <p className=\"text-2xl font-bold text-red-400\">{anomalyCount}</p>\r\n            </div>\r\n          </Card>\r\n          \r\n          <Card className=\"border border-cyan-500/30 bg-[rgba(10,25,47,0.7)] backdrop-blur-md\">\r\n            <div className=\"text-center\">\r\n              <div className=\"text-cyan-400 text-4xl mb-2\">📈</div>\r\n              <h3 className=\"text-cyan-300 mb-1\">异常比例</h3>\r\n              <p className=\"text-2xl font-bold text-teal-300\">\r\n                {totalRecords > 0 ? ((anomalyCount / totalRecords * 100).toFixed(2)) : 0}%\r\n              </p>\r\n            </div>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* 标签页切换 */}\r\n        <div className=\"flex mb-4 border-b border-cyan-500/30\">\r\n          <button\r\n            className={`px-4 py-2 font-medium ${\r\n              activeTab === 'anomalies' \r\n                ? 'text-cyan-300 border-b-2 border-cyan-400' \r\n                : 'text-cyan-200 hover:text-cyan-300'\r\n            }`}\r\n            onClick={() => setActiveTab('anomalies')}\r\n          >\r\n            异常数据列表\r\n          </button>\r\n          <button\r\n            className={`px-4 py-2 font-medium ${\r\n              activeTab === 'analysis' \r\n                ? 'text-cyan-300 border-b-2 border-cyan-400' \r\n                : 'text-cyan-200 hover:text-cyan-300'\r\n            }`}\r\n            onClick={() => setActiveTab('analysis')}\r\n          >\r\n            水质分析图表\r\n          </button>\r\n          <button\r\n            className={`px-4 py-2 font-medium ${\r\n              activeTab === 'distribution' \r\n                ? 'text-cyan-300 border-b-2 border-cyan-400' \r\n                : 'text-cyan-200 hover:text-cyan-300'\r\n            }`}\r\n            onClick={() => setActiveTab('distribution')}\r\n          >\r\n            异常分布\r\n          </button>\r\n        </div>\r\n\r\n        {/* 异常数据列表 */}\r\n        {activeTab === 'anomalies' && (\r\n          <Card \r\n            className=\"border border-cyan-500/30 bg-[rgba(10,25,47,0.7)] backdrop-blur-md\"\r\n            title={\r\n              <div className=\"flex items-center\">\r\n                <span className=\"text-cyan-300\">水质异常数据列表</span>\r\n                <span className=\"ml-2 bg-red-500/20 text-red-300 px-2 py-1 rounded-full text-xs\">\r\n                  {anomalies.length} 条记录\r\n                </span>\r\n              </div>\r\n            }\r\n            headStyle={{ borderBottom: '1px solid rgba(0, 230, 255, 0.2)', color: '#6df7e1' }}\r\n          >\r\n            {anomalies.length === 0 ? (\r\n              <div className=\"text-center py-10\">\r\n                <div className=\"text-cyan-300 text-xl mb-4\">🎉 未检测到异常数据</div>\r\n                <p className=\"text-cyan-200\">当前数据范围内水质指标均在正常阈值内</p>\r\n              </div>\r\n            ) : (\r\n              <Table \r\n                dataSource={anomalies} \r\n                columns={columns} \r\n                rowKey=\"record_id\"\r\n                pagination={{ pageSize: 10 }}\r\n                loading={isLoading}\r\n                className=\"custom-table\"\r\n                scroll={{ x: 1000 }}\r\n              />\r\n            )}\r\n          </Card>\r\n        )}\r\n\r\n        {/* 水质分析图表 */}\r\n        {activeTab === 'analysis' && chartData.length > 0 && (\r\n          <Card \r\n            className=\"border border-cyan-500/30 bg-[rgba(10,25,47,0.7)] backdrop-blur-md mb-6\"\r\n            title={\r\n              <div className=\"flex items-center\">\r\n                <span className=\"text-cyan-300\">水质参数分析</span>\r\n              </div>\r\n            }\r\n            headStyle={{ borderBottom: '1px solid rgba(0, 230, 255, 0.2)', color: '#6df7e1' }}\r\n          >\r\n            <ResponsiveContainer width=\"100%\" height={400}>\r\n              <BarChart\r\n                data={chartData}\r\n                margin={{ top: 20, right: 30, left: 20, bottom: 50 }}\r\n              >\r\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#2c3e50\" />\r\n                <XAxis dataKey=\"name\" stroke=\"#6df7e1\" angle={-45} textAnchor=\"end\" height={70} />\r\n                <YAxis stroke=\"#6df7e1\" />\r\n                <Tooltip \r\n                  contentStyle={{ \r\n                    backgroundColor: 'rgba(10,25,47,0.9)', \r\n                    border: '1px solid rgba(0, 230, 255, 0.3)',\r\n                    borderRadius: '8px'\r\n                  }} \r\n                  itemStyle={{ color: '#6df7e1' }}\r\n                />\r\n                <Legend />\r\n                <Bar dataKey=\"avg\" name=\"平均值\" fill=\"#0ea5e9\" />\r\n                <Bar dataKey=\"min\" name=\"最小值\" fill=\"#22d3ee\" />\r\n                <Bar dataKey=\"max\" name=\"最大值\" fill=\"#2dd4bf\" />\r\n                <Bar dataKey=\"lower_threshold\" name=\"阈值下限\" fill=\"#ef4444\" />\r\n                <Bar dataKey=\"upper_threshold\" name=\"阈值上限\" fill=\"#ef4444\" />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </Card>\r\n        )}\r\n\r\n        {/* 异常分布图表 */}\r\n        {activeTab === 'distribution' && stats && stats.anomaly_distribution && (\r\n          <Card \r\n            className=\"border border-cyan-500/30 bg-[rgba(10,25,47,0.7)] backdrop-blur-md\"\r\n            title={\r\n              <div className=\"flex items-center\">\r\n                <span className=\"text-cyan-300\">异常数据分布</span>\r\n              </div>\r\n            }\r\n            headStyle={{ borderBottom: '1px solid rgba(0, 230, 255, 0.2)', color: '#6df7e1' }}\r\n          >\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <h3 className=\"text-cyan-300 mb-4 text-center\">按监测站点分布</h3>\r\n                <ResponsiveContainer width=\"100%\" height={300}>\r\n                  <BarChart\r\n                    data={stats.anomaly_distribution.by_site}\r\n                    margin={{ top: 20, right: 30, left: 20, bottom: 50 }}\r\n                  >\r\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#2c3e50\" />\r\n                    <XAxis dataKey=\"site\" stroke=\"#6df7e1\" />\r\n                    <YAxis stroke=\"#6df7e1\" />\r\n                    <Tooltip \r\n                      contentStyle={{ \r\n                        backgroundColor: 'rgba(10,25,47,0.9)', \r\n                        border: '1px solid rgba(0, 230, 255, 0.3)',\r\n                        borderRadius: '8px'\r\n                      }} \r\n                    />\r\n                    <Bar dataKey=\"count\" name=\"异常次数\" fill=\"#ef4444\" />\r\n                  </BarChart>\r\n                </ResponsiveContainer>\r\n              </div>\r\n              \r\n              <div>\r\n                <h3 className=\"text-cyan-300 mb-4 text-center\">按异常参数分布</h3>\r\n                <ResponsiveContainer width=\"100%\" height={300}>\r\n                  <BarChart\r\n                    data={stats.anomaly_distribution.by_parameter}\r\n                    margin={{ top: 20, right: 30, left: 20, bottom: 50 }}\r\n                  >\r\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#2c3e50\" />\r\n                    <XAxis dataKey=\"parameter\" stroke=\"#6df7e1\" />\r\n                    <YAxis stroke=\"#6df7e1\" />\r\n                    <Tooltip \r\n                      contentStyle={{ \r\n                        backgroundColor: 'rgba(10,25,47,0.9)', \r\n                        border: '1px solid rgba(0, 230, 255, 0.3)',\r\n                        borderRadius: '8px'\r\n                      }} \r\n                    />\r\n                    <Bar dataKey=\"count\" name=\"异常次数\" fill=\"#f97316\" />\r\n                  </BarChart>\r\n                </ResponsiveContainer>\r\n              </div>\r\n            </div>\r\n          </Card>\r\n        )}\r\n\r\n        {/* 阈值设置模态框 */}\r\n        <Modal\r\n          title={\r\n            <div className=\"flex items-center\">\r\n              <SettingOutlined className=\"text-cyan-400 mr-2\" />\r\n              <span className=\"text-cyan-300\">水质指标阈值设置</span>\r\n            </div>\r\n          }\r\n          visible={thresholdModalVisible}\r\n          onCancel={closeThresholdModal}\r\n          footer={[\r\n            <Button key=\"cancel\" onClick={closeThresholdModal} className=\"text-cyan-300\">\r\n              取消\r\n            </Button>,\r\n            <Button \r\n              key=\"save\" \r\n              type=\"primary\" \r\n              onClick={saveThresholds} \r\n              loading={isLoading}\r\n              className=\"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 border-0 text-white font-bold\"\r\n            >\r\n              保存设置\r\n            </Button>,\r\n          ]}\r\n          width={800}\r\n          className=\"custom-modal\"\r\n          bodyStyle={{ backgroundColor: 'rgba(10,25,47,0.9)', border: '1px solid rgba(0, 230, 255, 0.3)' }}\r\n        >\r\n          <Form\r\n            form={thresholdForm}\r\n            layout=\"vertical\"\r\n            initialValues={{ remember: true }}\r\n          >\r\n            <h3 className=\"mb-4 text-lg font-semibold text-cyan-300\">水质指标阈值</h3>\r\n            \r\n            {thresholds.map((item, index) => (\r\n              <div key={item.parameter} className=\"mb-6 pb-6 border-b border-cyan-500/30\">\r\n                <h4 className=\"mb-3 text-md font-medium text-teal-300 flex items-center\">\r\n                  <span className=\"w-3 h-3 bg-cyan-500 rounded-full mr-2\"></span>\r\n                  {item.parameter}\r\n                </h4>\r\n                \r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <Form.Item\r\n                    label={<span className=\"text-cyan-200\">下限值</span>}\r\n                    name={`lower_${item.parameter}`}\r\n                    rules={[\r\n                      { required: true, message: '请输入下限值' },\r\n                      {\r\n                        validator(_, value) {\r\n                          if (isNaN(parseFloat(value))) {\r\n                            return Promise.reject('请输入有效的数字');\r\n                          }\r\n                          return Promise.resolve();\r\n                        },\r\n                      },\r\n                      ({ getFieldValue }) => ({\r\n                        validator(_, value) {\r\n                          const upperValue = getFieldValue(`upper_${item.parameter}`);\r\n                          if (upperValue && parseFloat(value) >= parseFloat(upperValue)) {\r\n                            return Promise.reject('下限值必须小于上限值');\r\n                          }\r\n                          return Promise.resolve();\r\n                        },\r\n                      }),\r\n                    ]}\r\n                  >\r\n                    <InputNumber \r\n                      placeholder=\"请输入下限值\" \r\n                      className=\"w-full bg-[rgba(10,40,70,0.5)] border border-cyan-500/50 text-white\"\r\n                      step={0.01}\r\n                    />\r\n                  </Form.Item>\r\n                  \r\n                  <Form.Item\r\n                    label={<span className=\"text-cyan-200\">上限值</span>}\r\n                    name={`upper_${item.parameter}`}\r\n                    rules={[\r\n                      { required: true, message: '请输入上限值' },\r\n                      {\r\n                        validator(_, value) {\r\n                          if (isNaN(parseFloat(value))) {\r\n                            return Promise.reject('请输入有效的数字');\r\n                          }\r\n                          return Promise.resolve();\r\n                        },\r\n                      },\r\n                      ({ getFieldValue }) => ({\r\n                        validator(_, value) {\r\n                          const lowerValue = getFieldValue(`lower_${item.parameter}`);\r\n                          if (lowerValue && parseFloat(value) <= parseFloat(lowerValue)) {\r\n                            return Promise.reject('上限值必须大于下限值');\r\n                          }\r\n                          return Promise.resolve();\r\n                        },\r\n                      }),\r\n                    ]}\r\n                  >\r\n                    <InputNumber \r\n                      placeholder=\"请输入上限值\" \r\n                      className=\"w-full bg-[rgba(10,40,70,0.5)] border border-cyan-500/50 text-white\"\r\n                      step={0.01}\r\n                    />\r\n                  </Form.Item>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </Form>\r\n        </Modal>\r\n      </div>\r\n\r\n      {/* 全局样式 */}\r\n      <style jsx global>{`\r\n        .water-quality-anomaly-detection {\r\n          .ant-card {\r\n            border-radius: 12px;\r\n            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);\r\n          }\r\n          \r\n          .ant-card-head {\r\n            background: linear-gradient(90deg, rgba(10, 25, 47, 0.5), rgba(10, 40, 70, 0.3)) !important;\r\n          }\r\n          \r\n          .ant-table {\r\n            background: transparent;\r\n            color: #e2e8f0;\r\n          }\r\n          \r\n          .ant-table-thead > tr > th {\r\n            background: rgba(10, 40, 70, 0.5) !important;\r\n            color: #6df7e1 !important;\r\n            border-bottom: 1px solid rgba(0, 230, 255, 0.2) !important;\r\n          }\r\n          \r\n          .ant-table-tbody > tr > td {\r\n            border-bottom: 1px solid rgba(0, 230, 255, 0.1) !important;\r\n            background: rgba(10, 25, 47, 0.3) !important;\r\n          }\r\n          \r\n          .ant-table-tbody > tr:hover > td {\r\n            background: rgba(10, 40, 70, 0.4) !important;\r\n          }\r\n          \r\n          .custom-range-picker .ant-picker {\r\n            background: rgba(10, 40, 70, 0.5);\r\n            border: 1px solid rgba(0, 230, 255, 0.3);\r\n            color: #6df7e1;\r\n          }\r\n          \r\n          .custom-range-picker .ant-picker-input > input {\r\n            color: #6df7e1;\r\n          }\r\n          \r\n          .custom-range-picker .ant-picker-suffix {\r\n            color: #6df7e1;\r\n          }\r\n          \r\n          .ant-modal-content {\r\n            background: linear-gradient(135deg, #0a192f, #0c2a4a) !important;\r\n            border: 1px solid rgba(0, 230, 255, 0.3) !important;\r\n            border-radius: 12px !important;\r\n          }\r\n          \r\n          .ant-modal-header {\r\n            background: rgba(10, 25, 47, 0.7) !important;\r\n            border-bottom: 1px solid rgba(0, 230, 255, 0.3) !important;\r\n          }\r\n          \r\n          .ant-modal-title {\r\n            color: #6df7e1 !important;\r\n          }\r\n          \r\n          .ant-modal-close-x {\r\n            color: #6df7e1 !important;\r\n          }\r\n          \r\n          .ant-input-number {\r\n            color: #e2e8f0;\r\n          }\r\n          \r\n          .ant-input-number-handler-wrap {\r\n            background: rgba(10, 40, 70, 0.5);\r\n          }\r\n          \r\n          .ant-tag {\r\n            margin-right: 0;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default WaterQualityAnomalyDetection;"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,KAAK,CAAEC,KAAK,CAAEC,IAAI,CAAEC,UAAU,CAAEC,MAAM,CAAEC,KAAK,CAAEC,GAAG,CAAEC,KAAK,CAAEC,IAAI,CAAEC,WAAW,CAAEC,OAAO,KAAQ,MAAM,CAC5G,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,MAAM,KAAM,QAAQ,CAC3B,OACEC,SAAS,CACTC,IAAI,CACJC,KAAK,CACLC,KAAK,CACLC,aAAa,CACbC,OAAO,CACPC,MAAM,CACNC,mBAAmB,CACnBC,QAAQ,CACRC,GAAG,KACE,UAAU,CACjB,OACEC,WAAW,CACXC,kBAAkB,CAClBC,eAAe,CACfC,eAAe,CACfC,mBAAoB;AAAA,KACf,mBAAmB,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,yBAE3B,KAAM,CAAEC,WAAY,CAAC,CAAG7B,UAAU,CAElC,QAAS,CAAA8B,4BAA4BA,CAAA,CAAG,CACtC,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGrC,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACsC,SAAS,CAAEC,YAAY,CAAC,CAAGvC,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACwC,YAAY,CAAEC,eAAe,CAAC,CAAGzC,QAAQ,CAAC,CAAC,CAAC,CACnD,KAAM,CAAC0C,YAAY,CAAEC,eAAe,CAAC,CAAG3C,QAAQ,CAAC,CAAC,CAAC,CACnD,KAAM,CAAC4C,UAAU,CAAEC,aAAa,CAAC,CAAG7C,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAAC8C,qBAAqB,CAAEC,wBAAwB,CAAC,CAAG/C,QAAQ,CAAC,KAAK,CAAC,CACzE,KAAM,CAACgD,aAAa,CAAC,CAAGtC,IAAI,CAACuC,OAAO,CAAC,CAAC,CACtC,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGnD,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACoD,SAAS,CAAEC,YAAY,CAAC,CAAGrD,QAAQ,CAAC,WAAW,CAAC,CAEvD,KAAM,CAAAsD,gBAAgB,CAAG,CACvBxC,MAAM,CAAC,qBAAqB,CAAC,CAC7BA,MAAM,CAAC,qBAAqB,CAAC,CAC9B,CAEDb,SAAS,CAAC,IAAM,CACdsD,eAAe,CAAC,CAAC,CACjBC,eAAe,CAACF,gBAAgB,CAAC,CACnC,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAC,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI,CACF,KAAM,CAAAE,QAAQ,CAAG,KAAM,CAAA5C,KAAK,CAAC6C,GAAG,CAAC,oDAAoD,CAAC,CACtFb,aAAa,CAACY,QAAQ,CAACE,IAAI,CAAC,CAE5B,KAAM,CAAAC,UAAU,CAAG,CAAC,CAAC,CACrBH,QAAQ,CAACE,IAAI,CAACE,OAAO,CAACC,IAAI,EAAI,CAC5BF,UAAU,CAAC,SAASE,IAAI,CAACC,SAAS,EAAE,CAAC,CAAGD,IAAI,CAACE,eAAe,CAC5DJ,UAAU,CAAC,SAASE,IAAI,CAACC,SAAS,EAAE,CAAC,CAAGD,IAAI,CAACG,eAAe,CAC9D,CAAC,CAAC,CACFjB,aAAa,CAACkB,cAAc,CAACN,UAAU,CAAC,CAC1C,CAAE,MAAOO,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,SAAS,CAAEA,KAAK,CAAC,CAC/BvD,OAAO,CAACuD,KAAK,CAAC,YAAY,CAAC,CAC7B,CACF,CAAC,CAED;AACA,KAAM,CAAAX,eAAe,CAAG,KAAO,CAAAa,SAAS,EAAK,CAC3ChC,YAAY,CAAC,IAAI,CAAC,CAClB,GAAI,CACF,KAAM,CAAAiC,SAAS,CAAGD,SAAS,EAAIA,SAAS,CAAC,CAAC,CAAC,CAAGA,SAAS,CAAC,CAAC,CAAC,CAACE,MAAM,CAAC,YAAY,CAAC,CAAG,EAAE,CACpF,KAAM,CAAAC,OAAO,CAAGH,SAAS,EAAIA,SAAS,CAAC,CAAC,CAAC,CAAGA,SAAS,CAAC,CAAC,CAAC,CAACE,MAAM,CAAC,YAAY,CAAC,CAAG,EAAE,CAElF,KAAM,CAAAd,QAAQ,CAAG,KAAM,CAAA5C,KAAK,CAAC6C,GAAG,CAC9B,0DAA0D,CAC1D,CAAEe,MAAM,CAAE,CAAEC,UAAU,CAAEJ,SAAS,CAAEK,QAAQ,CAAEH,OAAQ,CAAE,CACzD,CAAC,CAEDjC,YAAY,CAACkB,QAAQ,CAACE,IAAI,CAACrB,SAAS,CAAC,CACrCG,eAAe,CAACgB,QAAQ,CAACE,IAAI,CAACiB,aAAa,CAAC,CAC5CjC,eAAe,CAACc,QAAQ,CAACE,IAAI,CAACkB,aAAa,CAAC,CAC5C1B,QAAQ,CAACM,QAAQ,CAACE,IAAI,CAACT,KAAK,CAAC,CAE/B,CAAE,MAAOiB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,SAAS,CAAEA,KAAK,CAAC,CAC/BvD,OAAO,CAACuD,KAAK,CAAC,YAAY,CAAC,CAC7B,CAAC,OAAS,CACR9B,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED;AACA,KAAM,CAAAyC,kBAAkB,CAAGA,CAAA,GAAM,CAC/B/B,wBAAwB,CAAC,IAAI,CAAC,CAChC,CAAC,CAED;AACA,KAAM,CAAAgC,mBAAmB,CAAGA,CAAA,GAAM,CAChChC,wBAAwB,CAAC,KAAK,CAAC,CACjC,CAAC,CAED;AACA,KAAM,CAAAiC,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,CACF,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAjC,aAAa,CAACkC,cAAc,CAAC,CAAC,CAEnD,KAAM,CAAAC,aAAa,CAAGvC,UAAU,CAACwC,GAAG,CAACtB,IAAI,GAAK,CAC5CC,SAAS,CAAED,IAAI,CAACC,SAAS,CACzBC,eAAe,CAAEqB,UAAU,CAACJ,MAAM,CAAC,SAASnB,IAAI,CAACC,SAAS,EAAE,CAAC,CAAC,CAC9DE,eAAe,CAAEoB,UAAU,CAACJ,MAAM,CAAC,SAASnB,IAAI,CAACC,SAAS,EAAE,CAAC,CAC/D,CAAC,CAAC,CAAC,CAEH,KAAM,CAAAlD,KAAK,CAACyE,GAAG,CAAC,oDAAoD,CAAEH,aAAa,CAAC,CAEpFvE,OAAO,CAAC2E,OAAO,CAAC,SAAS,CAAC,CAC1BxC,wBAAwB,CAAC,KAAK,CAAC,CAC/BQ,eAAe,CAAC,CAAC,CACnB,CAAE,MAAOiC,SAAS,CAAE,CAClBpB,OAAO,CAACD,KAAK,CAAC,OAAO,CAAEqB,SAAS,CAAC,CACjC5E,OAAO,CAACuD,KAAK,CAAC,WAAW,CAAC,CAC5B,CACF,CAAC,CAED,KAAM,CAAAsB,OAAO,CAAG,CACd,CACEC,KAAK,CAAE,MAAM,CACbC,SAAS,CAAE,WAAW,CACtBC,GAAG,CAAE,WAAW,CAChBC,KAAK,CAAE,GAAG,CACVC,MAAM,CAAGC,IAAI,eAAKhE,KAAA,SAAMiE,SAAS,CAAC,yBAAyB,CAAAC,QAAA,EAAC,GAAC,CAACF,IAAI,EAAO,CAC3E,CAAC,CACD,CACEL,KAAK,CAAE,MAAM,CACbC,SAAS,CAAE,SAAS,CACpBC,GAAG,CAAE,SAAS,CACdC,KAAK,CAAE,GAAG,CACVC,MAAM,CAAGC,IAAI,eAAK9D,IAAA,SAAM+D,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEF,IAAI,CAAO,CAChE,CAAC,CACD,CACEL,KAAK,CAAE,MAAM,CACbC,SAAS,CAAE,iBAAiB,CAC5BC,GAAG,CAAE,iBAAiB,CACtBC,KAAK,CAAE,GACT,CAAC,CACD,CACEH,KAAK,CAAE,MAAM,CACbC,SAAS,CAAE,iBAAiB,CAC5BC,GAAG,CAAE,iBAAiB,CACtBC,KAAK,CAAE,GACT,CAAC,CACD,CACEH,KAAK,CAAE,MAAM,CACbC,SAAS,CAAE,cAAc,CACzBC,GAAG,CAAE,cAAc,CACnBM,QAAQ,CAAE,IAAI,CACdL,KAAK,CAAE,GAAG,CACVC,MAAM,CAAGC,IAAI,eAAK9D,IAAA,SAAM+D,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEF,IAAI,CAAO,CAChE,CAAC,CACD,CACEL,KAAK,CAAE,MAAM,CACbC,SAAS,CAAE,iBAAiB,CAC5BC,GAAG,CAAE,iBAAiB,CACtBE,MAAM,CAAGK,OAAO,eACdlE,IAAA,QAAK+D,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAClCE,OAAO,CAACf,GAAG,CAAC,CAACgB,MAAM,CAAEC,KAAK,gBACzBpE,IAAA,CAACzB,GAAG,EAEFwF,SAAS,CAAC,4EAA4E,CAAAC,QAAA,CAErFG,MAAM,EAHFC,KAIF,CACN,CAAC,CACC,CAET,CAAC,CACF,CAED;AACA,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,GAAI,CAACpD,KAAK,EAAI,CAACA,KAAK,CAACqD,UAAU,CAAE,MAAO,EAAE,CAE1C,MAAO,CAAArD,KAAK,CAACqD,UAAU,CAACnB,GAAG,CAACoB,KAAK,EAAI,CACnC,KAAM,CAAAC,SAAS,CAAG7D,UAAU,CAAC8D,IAAI,CAACC,CAAC,EAAIA,CAAC,CAAC5C,SAAS,GAAKyC,KAAK,CAACI,IAAI,CAAC,CAClE,MAAO,CACLA,IAAI,CAAEJ,KAAK,CAACI,IAAI,CAChBC,GAAG,CAAEL,KAAK,CAACK,GAAG,CACdC,GAAG,CAAEN,KAAK,CAACM,GAAG,CACdC,GAAG,CAAEP,KAAK,CAACO,GAAG,CACd/C,eAAe,CAAE,CAAAyC,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAEzC,eAAe,GAAI,CAAC,CAChDC,eAAe,CAAE,CAAAwC,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAExC,eAAe,GAAI,CACjD,CAAC,CACH,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAA+C,SAAS,CAAGV,gBAAgB,CAAC,CAAC,CAEpC,mBACEvE,KAAA,QAAKiE,SAAS,CAAC,0GAA0G,CAAAC,QAAA,eACvHlE,KAAA,QAAKiE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAEhClE,KAAA,QAAKiE,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrChE,IAAA,CAACJ,mBAAmB,EAACmE,SAAS,CAAC,6BAA6B,CAAE,CAAC,cAC/DjE,KAAA,QAAAkE,QAAA,eACEhE,IAAA,OAAI+D,SAAS,CAAC,6FAA6F,CAAAC,QAAA,CAAC,8DAE5G,CAAI,CAAC,cACLhE,IAAA,MAAG+D,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,8GAAkB,CAAG,CAAC,EACrD,CAAC,EACH,CAAC,cAGNlE,KAAA,CAAC3B,IAAI,EACH4F,SAAS,CAAC,yEAAyE,CACnFN,KAAK,cACH3D,KAAA,QAAKiE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChChE,IAAA,CAACR,WAAW,EAACuE,SAAS,CAAC,oBAAoB,CAAE,CAAC,cAC9C/D,IAAA,SAAM+D,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,sCAAM,CAAM,CAAC,EAC1C,CACN,CACDgB,SAAS,CAAE,CAAEC,YAAY,CAAE,kCAAkC,CAAEC,KAAK,CAAE,SAAU,CAAE,CAAAlB,QAAA,eAElFlE,KAAA,CAACxB,KAAK,EAACyF,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACvBhE,IAAA,CAACC,WAAW,EACVkF,QAAQ,MACR7C,MAAM,CAAC,qBAAqB,CAC5B8C,WAAW,CAAE,CAAC,MAAM,CAAE,MAAM,CAAE,CAC9BC,YAAY,CAAEhE,gBAAiB,CAC/BiE,IAAI,CAAE/D,eAAgB,CACtBwC,SAAS,CAAC,qBAAqB,CAChC,CAAC,cACF/D,IAAA,CAAC3B,MAAM,EACLkH,IAAI,CAAC,SAAS,CACdC,OAAO,CAAEA,CAAA,GAAMjE,eAAe,CAAC,CAAE,CACjCkE,OAAO,CAAEtF,SAAU,CACnB4D,SAAS,CAAC,gHAAgH,CAC1H2B,IAAI,cAAE1F,IAAA,CAACP,kBAAkB,GAAE,CAAE,CAAAuE,QAAA,CAC9B,0BAED,CAAQ,CAAC,cACThE,IAAA,CAAC3B,MAAM,EACLmH,OAAO,CAAE3C,kBAAmB,CAC5BkB,SAAS,CAAC,+FAA+F,CACzG2B,IAAI,cAAE1F,IAAA,CAACN,eAAe,GAAE,CAAE,CAAAsE,QAAA,CAC3B,0BAED,CAAQ,CAAC,EACJ,CAAC,CAEPzD,YAAY,CAAG,CAAC,eACfP,IAAA,CAAC9B,KAAK,EACJS,OAAO,cACLmB,KAAA,QAAKiE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChChE,IAAA,CAACL,eAAe,EAACoE,SAAS,CAAC,MAAM,CAAE,CAAC,cACpCjE,KAAA,SAAAkE,QAAA,EAAM,sCACE,cAAAhE,IAAA,SAAM+D,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CAAEzD,YAAY,CAAO,CAAC,2BAC1E,cAAAP,IAAA,SAAM+D,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAEvD,YAAY,CAAO,CAAC,qBACrE,EAAM,CAAC,EACJ,CACN,CACD8E,IAAI,CAAE9E,YAAY,CAAG,CAAC,CAAG,SAAS,CAAG,SAAU,CAC/CkF,QAAQ,CAAE,KAAM,CAChB5B,SAAS,CAAC,4DAA4D,CACvE,CACF,EACG,CAAC,cAGPjE,KAAA,QAAKiE,SAAS,CAAC,4CAA4C,CAAAC,QAAA,eACzDhE,IAAA,CAAC7B,IAAI,EAAC4F,SAAS,CAAC,oEAAoE,CAAAC,QAAA,cAClFlE,KAAA,QAAKiE,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BhE,IAAA,QAAK+D,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,cAAE,CAAK,CAAC,cACrDhE,IAAA,OAAI+D,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,0BAAI,CAAI,CAAC,cAC5ChE,IAAA,MAAG+D,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAE,CAAA/C,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAE2E,KAAK,GAAI,CAAC,CAAI,CAAC,EACpE,CAAC,CACF,CAAC,cAEP5F,IAAA,CAAC7B,IAAI,EAAC4F,SAAS,CAAC,oEAAoE,CAAAC,QAAA,cAClFlE,KAAA,QAAKiE,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BhE,IAAA,QAAK+D,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,cAAE,CAAK,CAAC,cACrDhE,IAAA,OAAI+D,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,0BAAI,CAAI,CAAC,cAC5ChE,IAAA,MAAG+D,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAEzD,YAAY,CAAI,CAAC,EAC/D,CAAC,CACF,CAAC,cAEPP,IAAA,CAAC7B,IAAI,EAAC4F,SAAS,CAAC,oEAAoE,CAAAC,QAAA,cAClFlE,KAAA,QAAKiE,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BhE,IAAA,QAAK+D,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,cAAE,CAAK,CAAC,cACrDhE,IAAA,OAAI+D,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,0BAAI,CAAI,CAAC,cAC5ChE,IAAA,MAAG+D,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAEvD,YAAY,CAAI,CAAC,EAC9D,CAAC,CACF,CAAC,cAEPT,IAAA,CAAC7B,IAAI,EAAC4F,SAAS,CAAC,oEAAoE,CAAAC,QAAA,cAClFlE,KAAA,QAAKiE,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BhE,IAAA,QAAK+D,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,cAAE,CAAK,CAAC,cACrDhE,IAAA,OAAI+D,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,0BAAI,CAAI,CAAC,cAC5ClE,KAAA,MAAGiE,SAAS,CAAC,kCAAkC,CAAAC,QAAA,EAC5CzD,YAAY,CAAG,CAAC,CAAI,CAACE,YAAY,CAAGF,YAAY,CAAG,GAAG,EAAEsF,OAAO,CAAC,CAAC,CAAC,CAAI,CAAC,CAAC,GAC3E,EAAG,CAAC,EACD,CAAC,CACF,CAAC,EACJ,CAAC,cAGN/F,KAAA,QAAKiE,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpDhE,IAAA,WACE+D,SAAS,CAAE,yBACT5C,SAAS,GAAK,WAAW,CACrB,0CAA0C,CAC1C,mCAAmC,EACtC,CACHqE,OAAO,CAAEA,CAAA,GAAMpE,YAAY,CAAC,WAAW,CAAE,CAAA4C,QAAA,CAC1C,sCAED,CAAQ,CAAC,cACThE,IAAA,WACE+D,SAAS,CAAE,yBACT5C,SAAS,GAAK,UAAU,CACpB,0CAA0C,CAC1C,mCAAmC,EACtC,CACHqE,OAAO,CAAEA,CAAA,GAAMpE,YAAY,CAAC,UAAU,CAAE,CAAA4C,QAAA,CACzC,sCAED,CAAQ,CAAC,cACThE,IAAA,WACE+D,SAAS,CAAE,yBACT5C,SAAS,GAAK,cAAc,CACxB,0CAA0C,CAC1C,mCAAmC,EACtC,CACHqE,OAAO,CAAEA,CAAA,GAAMpE,YAAY,CAAC,cAAc,CAAE,CAAA4C,QAAA,CAC7C,0BAED,CAAQ,CAAC,EACN,CAAC,CAGL7C,SAAS,GAAK,WAAW,eACxBnB,IAAA,CAAC7B,IAAI,EACH4F,SAAS,CAAC,oEAAoE,CAC9EN,KAAK,cACH3D,KAAA,QAAKiE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChChE,IAAA,SAAM+D,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,kDAAQ,CAAM,CAAC,cAC/ClE,KAAA,SAAMiE,SAAS,CAAC,gEAAgE,CAAAC,QAAA,EAC7E3D,SAAS,CAACyF,MAAM,CAAC,qBACpB,EAAM,CAAC,EACJ,CACN,CACDd,SAAS,CAAE,CAAEC,YAAY,CAAE,kCAAkC,CAAEC,KAAK,CAAE,SAAU,CAAE,CAAAlB,QAAA,CAEjF3D,SAAS,CAACyF,MAAM,GAAK,CAAC,cACrBhG,KAAA,QAAKiE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChChE,IAAA,QAAK+D,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,+DAAW,CAAK,CAAC,cAC7DhE,IAAA,MAAG+D,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,8GAAkB,CAAG,CAAC,EAChD,CAAC,cAENhE,IAAA,CAAC/B,KAAK,EACJ8H,UAAU,CAAE1F,SAAU,CACtBmD,OAAO,CAAEA,OAAQ,CACjBwC,MAAM,CAAC,WAAW,CAClBC,UAAU,CAAE,CAAEC,QAAQ,CAAE,EAAG,CAAE,CAC7BT,OAAO,CAAEtF,SAAU,CACnB4D,SAAS,CAAC,cAAc,CACxBoC,MAAM,CAAE,CAAEC,CAAC,CAAE,IAAK,CAAE,CACrB,CACF,CACG,CACP,CAGAjF,SAAS,GAAK,UAAU,EAAI4D,SAAS,CAACe,MAAM,CAAG,CAAC,eAC/C9F,IAAA,CAAC7B,IAAI,EACH4F,SAAS,CAAC,yEAAyE,CACnFN,KAAK,cACHzD,IAAA,QAAK+D,SAAS,CAAC,mBAAmB,CAAAC,QAAA,cAChChE,IAAA,SAAM+D,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,sCAAM,CAAM,CAAC,CAC1C,CACN,CACDgB,SAAS,CAAE,CAAEC,YAAY,CAAE,kCAAkC,CAAEC,KAAK,CAAE,SAAU,CAAE,CAAAlB,QAAA,cAElFhE,IAAA,CAACX,mBAAmB,EAACuE,KAAK,CAAC,MAAM,CAACyC,MAAM,CAAE,GAAI,CAAArC,QAAA,cAC5ClE,KAAA,CAACR,QAAQ,EACPoC,IAAI,CAAEqD,SAAU,CAChBuB,MAAM,CAAE,CAAEC,GAAG,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAE,CAAEC,MAAM,CAAE,EAAG,CAAE,CAAA1C,QAAA,eAErDhE,IAAA,CAACd,aAAa,EAACyH,eAAe,CAAC,KAAK,CAACC,MAAM,CAAC,SAAS,CAAE,CAAC,cACxD5G,IAAA,CAAChB,KAAK,EAAC6H,OAAO,CAAC,MAAM,CAACD,MAAM,CAAC,SAAS,CAACE,KAAK,CAAE,CAAC,EAAG,CAACC,UAAU,CAAC,KAAK,CAACV,MAAM,CAAE,EAAG,CAAE,CAAC,cAClFrG,IAAA,CAACf,KAAK,EAAC2H,MAAM,CAAC,SAAS,CAAE,CAAC,cAC1B5G,IAAA,CAACb,OAAO,EACN6H,YAAY,CAAE,CACZC,eAAe,CAAE,oBAAoB,CACrCC,MAAM,CAAE,kCAAkC,CAC1CC,YAAY,CAAE,KAChB,CAAE,CACFC,SAAS,CAAE,CAAElC,KAAK,CAAE,SAAU,CAAE,CACjC,CAAC,cACFlF,IAAA,CAACZ,MAAM,GAAE,CAAC,cACVY,IAAA,CAACT,GAAG,EAACsH,OAAO,CAAC,KAAK,CAAClC,IAAI,CAAC,oBAAK,CAAC0C,IAAI,CAAC,SAAS,CAAE,CAAC,cAC/CrH,IAAA,CAACT,GAAG,EAACsH,OAAO,CAAC,KAAK,CAAClC,IAAI,CAAC,oBAAK,CAAC0C,IAAI,CAAC,SAAS,CAAE,CAAC,cAC/CrH,IAAA,CAACT,GAAG,EAACsH,OAAO,CAAC,KAAK,CAAClC,IAAI,CAAC,oBAAK,CAAC0C,IAAI,CAAC,SAAS,CAAE,CAAC,cAC/CrH,IAAA,CAACT,GAAG,EAACsH,OAAO,CAAC,iBAAiB,CAAClC,IAAI,CAAC,0BAAM,CAAC0C,IAAI,CAAC,SAAS,CAAE,CAAC,cAC5DrH,IAAA,CAACT,GAAG,EAACsH,OAAO,CAAC,iBAAiB,CAAClC,IAAI,CAAC,0BAAM,CAAC0C,IAAI,CAAC,SAAS,CAAE,CAAC,EACpD,CAAC,CACQ,CAAC,CAClB,CACP,CAGAlG,SAAS,GAAK,cAAc,EAAIF,KAAK,EAAIA,KAAK,CAACqG,oBAAoB,eAClEtH,IAAA,CAAC7B,IAAI,EACH4F,SAAS,CAAC,oEAAoE,CAC9EN,KAAK,cACHzD,IAAA,QAAK+D,SAAS,CAAC,mBAAmB,CAAAC,QAAA,cAChChE,IAAA,SAAM+D,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,sCAAM,CAAM,CAAC,CAC1C,CACN,CACDgB,SAAS,CAAE,CAAEC,YAAY,CAAE,kCAAkC,CAAEC,KAAK,CAAE,SAAU,CAAE,CAAAlB,QAAA,cAElFlE,KAAA,QAAKiE,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpDlE,KAAA,QAAAkE,QAAA,eACEhE,IAAA,OAAI+D,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,4CAAO,CAAI,CAAC,cAC3DhE,IAAA,CAACX,mBAAmB,EAACuE,KAAK,CAAC,MAAM,CAACyC,MAAM,CAAE,GAAI,CAAArC,QAAA,cAC5ClE,KAAA,CAACR,QAAQ,EACPoC,IAAI,CAAET,KAAK,CAACqG,oBAAoB,CAACC,OAAQ,CACzCjB,MAAM,CAAE,CAAEC,GAAG,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAE,CAAEC,MAAM,CAAE,EAAG,CAAE,CAAA1C,QAAA,eAErDhE,IAAA,CAACd,aAAa,EAACyH,eAAe,CAAC,KAAK,CAACC,MAAM,CAAC,SAAS,CAAE,CAAC,cACxD5G,IAAA,CAAChB,KAAK,EAAC6H,OAAO,CAAC,MAAM,CAACD,MAAM,CAAC,SAAS,CAAE,CAAC,cACzC5G,IAAA,CAACf,KAAK,EAAC2H,MAAM,CAAC,SAAS,CAAE,CAAC,cAC1B5G,IAAA,CAACb,OAAO,EACN6H,YAAY,CAAE,CACZC,eAAe,CAAE,oBAAoB,CACrCC,MAAM,CAAE,kCAAkC,CAC1CC,YAAY,CAAE,KAChB,CAAE,CACH,CAAC,cACFnH,IAAA,CAACT,GAAG,EAACsH,OAAO,CAAC,OAAO,CAAClC,IAAI,CAAC,0BAAM,CAAC0C,IAAI,CAAC,SAAS,CAAE,CAAC,EAC1C,CAAC,CACQ,CAAC,EACnB,CAAC,cAENvH,KAAA,QAAAkE,QAAA,eACEhE,IAAA,OAAI+D,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,4CAAO,CAAI,CAAC,cAC3DhE,IAAA,CAACX,mBAAmB,EAACuE,KAAK,CAAC,MAAM,CAACyC,MAAM,CAAE,GAAI,CAAArC,QAAA,cAC5ClE,KAAA,CAACR,QAAQ,EACPoC,IAAI,CAAET,KAAK,CAACqG,oBAAoB,CAACE,YAAa,CAC9ClB,MAAM,CAAE,CAAEC,GAAG,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAE,CAAEC,MAAM,CAAE,EAAG,CAAE,CAAA1C,QAAA,eAErDhE,IAAA,CAACd,aAAa,EAACyH,eAAe,CAAC,KAAK,CAACC,MAAM,CAAC,SAAS,CAAE,CAAC,cACxD5G,IAAA,CAAChB,KAAK,EAAC6H,OAAO,CAAC,WAAW,CAACD,MAAM,CAAC,SAAS,CAAE,CAAC,cAC9C5G,IAAA,CAACf,KAAK,EAAC2H,MAAM,CAAC,SAAS,CAAE,CAAC,cAC1B5G,IAAA,CAACb,OAAO,EACN6H,YAAY,CAAE,CACZC,eAAe,CAAE,oBAAoB,CACrCC,MAAM,CAAE,kCAAkC,CAC1CC,YAAY,CAAE,KAChB,CAAE,CACH,CAAC,cACFnH,IAAA,CAACT,GAAG,EAACsH,OAAO,CAAC,OAAO,CAAClC,IAAI,CAAC,0BAAM,CAAC0C,IAAI,CAAC,SAAS,CAAE,CAAC,EAC1C,CAAC,CACQ,CAAC,EACnB,CAAC,EACH,CAAC,CACF,CACP,cAGDrH,IAAA,CAACxB,KAAK,EACJiF,KAAK,cACH3D,KAAA,QAAKiE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChChE,IAAA,CAACN,eAAe,EAACqE,SAAS,CAAC,oBAAoB,CAAE,CAAC,cAClD/D,IAAA,SAAM+D,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,kDAAQ,CAAM,CAAC,EAC5C,CACN,CACDyD,OAAO,CAAE5G,qBAAsB,CAC/B6G,QAAQ,CAAE5E,mBAAoB,CAC9B6E,MAAM,CAAE,cACN3H,IAAA,CAAC3B,MAAM,EAAcmH,OAAO,CAAE1C,mBAAoB,CAACiB,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,cAE7E,EAFY,QAEJ,CAAC,cACThE,IAAA,CAAC3B,MAAM,EAELkH,IAAI,CAAC,SAAS,CACdC,OAAO,CAAEzC,cAAe,CACxB0C,OAAO,CAAEtF,SAAU,CACnB4D,SAAS,CAAC,gHAAgH,CAAAC,QAAA,CAC3H,0BAED,EAPM,MAOE,CAAC,CACT,CACFJ,KAAK,CAAE,GAAI,CACXG,SAAS,CAAC,cAAc,CACxB6D,SAAS,CAAE,CAAEX,eAAe,CAAE,oBAAoB,CAAEC,MAAM,CAAE,kCAAmC,CAAE,CAAAlD,QAAA,cAEjGlE,KAAA,CAACrB,IAAI,EACHoJ,IAAI,CAAE9G,aAAc,CACpB+G,MAAM,CAAC,UAAU,CACjBC,aAAa,CAAE,CAAEC,QAAQ,CAAE,IAAK,CAAE,CAAAhE,QAAA,eAElChE,IAAA,OAAI+D,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,sCAAM,CAAI,CAAC,CAEnErD,UAAU,CAACwC,GAAG,CAAC,CAACtB,IAAI,CAAEuC,KAAK,gBAC1BtE,KAAA,QAA0BiE,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACzElE,KAAA,OAAIiE,SAAS,CAAC,0DAA0D,CAAAC,QAAA,eACtEhE,IAAA,SAAM+D,SAAS,CAAC,uCAAuC,CAAO,CAAC,CAC9DlC,IAAI,CAACC,SAAS,EACb,CAAC,cAELhC,KAAA,QAAKiE,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpDhE,IAAA,CAACvB,IAAI,CAACwJ,IAAI,EACRC,KAAK,cAAElI,IAAA,SAAM+D,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,oBAAG,CAAM,CAAE,CAClDW,IAAI,CAAE,SAAS9C,IAAI,CAACC,SAAS,EAAG,CAChCqG,KAAK,CAAE,CACL,CAAEC,QAAQ,CAAE,IAAI,CAAEzJ,OAAO,CAAE,QAAS,CAAC,CACrC,CACE0J,SAASA,CAACC,CAAC,CAAEC,KAAK,CAAE,CAClB,GAAIC,KAAK,CAACpF,UAAU,CAACmF,KAAK,CAAC,CAAC,CAAE,CAC5B,MAAO,CAAAE,OAAO,CAACC,MAAM,CAAC,UAAU,CAAC,CACnC,CACA,MAAO,CAAAD,OAAO,CAACE,OAAO,CAAC,CAAC,CAC1B,CACF,CAAC,CACDC,IAAA,MAAC,CAAEC,aAAc,CAAC,CAAAD,IAAA,OAAM,CACtBP,SAASA,CAACC,CAAC,CAAEC,KAAK,CAAE,CAClB,KAAM,CAAAO,UAAU,CAAGD,aAAa,CAAC,SAAShH,IAAI,CAACC,SAAS,EAAE,CAAC,CAC3D,GAAIgH,UAAU,EAAI1F,UAAU,CAACmF,KAAK,CAAC,EAAInF,UAAU,CAAC0F,UAAU,CAAC,CAAE,CAC7D,MAAO,CAAAL,OAAO,CAACC,MAAM,CAAC,YAAY,CAAC,CACrC,CACA,MAAO,CAAAD,OAAO,CAACE,OAAO,CAAC,CAAC,CAC1B,CACF,CAAC,EAAC,CACF,CAAA3E,QAAA,cAEFhE,IAAA,CAACtB,WAAW,EACV0G,WAAW,CAAC,sCAAQ,CACpBrB,SAAS,CAAC,qEAAqE,CAC/EgF,IAAI,CAAE,IAAK,CACZ,CAAC,CACO,CAAC,cAEZ/I,IAAA,CAACvB,IAAI,CAACwJ,IAAI,EACRC,KAAK,cAAElI,IAAA,SAAM+D,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,oBAAG,CAAM,CAAE,CAClDW,IAAI,CAAE,SAAS9C,IAAI,CAACC,SAAS,EAAG,CAChCqG,KAAK,CAAE,CACL,CAAEC,QAAQ,CAAE,IAAI,CAAEzJ,OAAO,CAAE,QAAS,CAAC,CACrC,CACE0J,SAASA,CAACC,CAAC,CAAEC,KAAK,CAAE,CAClB,GAAIC,KAAK,CAACpF,UAAU,CAACmF,KAAK,CAAC,CAAC,CAAE,CAC5B,MAAO,CAAAE,OAAO,CAACC,MAAM,CAAC,UAAU,CAAC,CACnC,CACA,MAAO,CAAAD,OAAO,CAACE,OAAO,CAAC,CAAC,CAC1B,CACF,CAAC,CACDK,KAAA,MAAC,CAAEH,aAAc,CAAC,CAAAG,KAAA,OAAM,CACtBX,SAASA,CAACC,CAAC,CAAEC,KAAK,CAAE,CAClB,KAAM,CAAAU,UAAU,CAAGJ,aAAa,CAAC,SAAShH,IAAI,CAACC,SAAS,EAAE,CAAC,CAC3D,GAAImH,UAAU,EAAI7F,UAAU,CAACmF,KAAK,CAAC,EAAInF,UAAU,CAAC6F,UAAU,CAAC,CAAE,CAC7D,MAAO,CAAAR,OAAO,CAACC,MAAM,CAAC,YAAY,CAAC,CACrC,CACA,MAAO,CAAAD,OAAO,CAACE,OAAO,CAAC,CAAC,CAC1B,CACF,CAAC,EAAC,CACF,CAAA3E,QAAA,cAEFhE,IAAA,CAACtB,WAAW,EACV0G,WAAW,CAAC,sCAAQ,CACpBrB,SAAS,CAAC,qEAAqE,CAC/EgF,IAAI,CAAE,IAAK,CACZ,CAAC,CACO,CAAC,EACT,CAAC,GApEElH,IAAI,CAACC,SAqEV,CACN,CAAC,EACE,CAAC,CACF,CAAC,EACL,CAAC,cAGN9B,IAAA,UAAOD,GAAG,MAACmJ,MAAM,MAAAlF,QAAA,CAAE;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,CAAQ,CAAC,EACP,CAAC,CAEV,CAEA,cAAe,CAAA9D,4BAA4B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}