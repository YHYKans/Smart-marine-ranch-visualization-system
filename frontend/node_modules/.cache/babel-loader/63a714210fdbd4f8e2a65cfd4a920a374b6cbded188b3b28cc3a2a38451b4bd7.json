{"ast":null,"code":"var _jsxFileName = \"D:\\\\\\u8F6F\\u4EF6\\u5DE5\\u7A0B\\\\\\u667A\\u6167\\u6D77\\u6D0B\\u7267\\u573A\\u53EF\\u89C6\\u5316\\u7CFB\\u7EDF\\\\frontend\\\\src\\\\components\\\\RequireAuth.jsx\",\n  _s = $RefreshSig$();\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RequireAuth = ({\n  children,\n  requireAdmin = false\n}) => {\n  _s();\n  const {\n    isAuthenticated,\n    userInfo\n  } = useAuth();\n  const location = useLocation();\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/auth\",\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 12\n    }, this);\n  }\n  if (requireAdmin && !(userInfo !== null && userInfo !== void 0 && userInfo.isAdmin)) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/error\",\n      state: {\n        code: 403,\n        message: '需要管理员权限才能访问此页面'\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 7\n    }, this);\n  }\n  return children;\n};\n_s(RequireAuth, \"65fVZIfNlZgeQSiUs5KzUgdfe5o=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c = RequireAuth;\nexport default RequireAuth; // 确保使用默认导出\nvar _c;\n$RefreshReg$(_c, \"RequireAuth\");","map":{"version":3,"names":["Navigate","useLocation","useAuth","jsxDEV","_jsxDEV","RequireAuth","children","requireAdmin","_s","isAuthenticated","userInfo","location","to","state","from","replace","fileName","_jsxFileName","lineNumber","columnNumber","isAdmin","code","message","_c","$RefreshReg$"],"sources":["D:/软件工程/智慧海洋牧场可视化系统/frontend/src/components/RequireAuth.jsx"],"sourcesContent":["import { Navigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst RequireAuth = ({ children, requireAdmin = false }) => {\r\n  const { isAuthenticated, userInfo } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (!isAuthenticated) {\r\n    return <Navigate to=\"/auth\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  if (requireAdmin && !userInfo?.isAdmin) {\r\n    return (\r\n      <Navigate\r\n        to=\"/error\"\r\n        state={{\r\n          code: 403,\r\n          message: '需要管理员权限才能访问此页面'\r\n        }}\r\n        replace\r\n      />\r\n    );\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\nexport default RequireAuth;  // 确保使用默认导出"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,WAAW,QAAQ,kBAAkB;AACxD,SAASC,OAAO,QAAQ,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEjD,MAAMC,WAAW,GAAGA,CAAC;EAAEC,QAAQ;EAAEC,YAAY,GAAG;AAAM,CAAC,KAAK;EAAAC,EAAA;EAC1D,MAAM;IAAEC,eAAe;IAAEC;EAAS,CAAC,GAAGR,OAAO,CAAC,CAAC;EAC/C,MAAMS,QAAQ,GAAGV,WAAW,CAAC,CAAC;EAE9B,IAAI,CAACQ,eAAe,EAAE;IACpB,oBAAOL,OAAA,CAACJ,QAAQ;MAACY,EAAE,EAAC,OAAO;MAACC,KAAK,EAAE;QAAEC,IAAI,EAAEH;MAAS,CAAE;MAACI,OAAO;IAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACnE;EAEA,IAAIZ,YAAY,IAAI,EAACG,QAAQ,aAARA,QAAQ,eAARA,QAAQ,CAAEU,OAAO,GAAE;IACtC,oBACEhB,OAAA,CAACJ,QAAQ;MACPY,EAAE,EAAC,QAAQ;MACXC,KAAK,EAAE;QACLQ,IAAI,EAAE,GAAG;QACTC,OAAO,EAAE;MACX,CAAE;MACFP,OAAO;IAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC;EAEN;EAEA,OAAOb,QAAQ;AACjB,CAAC;AAACE,EAAA,CAtBIH,WAAW;EAAA,QACuBH,OAAO,EAC5BD,WAAW;AAAA;AAAAsB,EAAA,GAFxBlB,WAAW;AAwBjB,eAAeA,WAAW,CAAC,CAAE;AAAA,IAAAkB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}