{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function FishVisualization(){// 状态管理\nconst[barChart,setBarChart]=useState(null);const[scatterChart,setScatterChart]=useState(null);const[error,setError]=useState('');const[isLoading,setIsLoading]=useState(false);// 样式对象（与示例保持一致）\nconst styles={container:{maxWidth:'1200px',margin:'0 auto',padding:'2rem',fontFamily:\"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\"},header:{textAlign:'center',color:'#2c3e50',marginBottom:'2rem',fontSize:'2.5rem',textShadow:'2px 2px 4px rgba(0,0,0,0.1)'},controlPanel:{display:'flex',justifyContent:'center',marginBottom:'2rem'},submitButton:{padding:'0.8rem 2rem',backgroundColor:'#3498db',color:'white',border:'none',borderRadius:'8px',fontSize:'1.1rem',cursor:'pointer',transition:'all 0.3s ease',':hover':{backgroundColor:'#2980b9',transform:'translateY(-1px)'},':disabled':{backgroundColor:'#bdc3c7',cursor:'not-allowed',transform:'none'}},error:{backgroundColor:'#ffe6e6',color:'#e74c3c',padding:'1rem',borderRadius:'8px',margin:'1rem auto',maxWidth:'600px',textAlign:'center',border:'1px solid #e74c3c'},chartContainer:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(400px, 1fr))',gap:'2rem',marginTop:'2rem'},chartCard:{backgroundColor:'white',borderRadius:'12px',padding:'1.5rem',boxShadow:'0 4px 6px rgba(0,0,0,0.1)',transition:'transform 0.3s ease',':hover':{transform:'translateY(-5px)'}},chartTitle:{color:'#2c3e50',marginBottom:'1rem',textAlign:'center'},chartImage:{width:'100%',height:'auto',borderRadius:'8px'},loadingOverlay:{position:'fixed',top:0,left:0,right:0,bottom:0,backgroundColor:'rgba(255, 255, 255, 0.9)',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',zIndex:1000},spinner:{width:'50px',height:'50px',borderRadius:'50%',border:'4px solid #f3f3f3',borderTop:'4px solid #3498db',animation:'spin 1s linear infinite'}};// 提交处理\nconst handleSubmit=async e=>{e.preventDefault();setError('');setIsLoading(true);try{const response=await fetch('http://localhost:3001/visualize-fish',{method:'POST',headers:{'Content-Type':'application/json'}});if(!response.ok)throw new Error(await response.text());const data=await response.json();if(data.error)throw new Error(data.error);setBarChart(data.bar_chart);setScatterChart(data.scatter_chart);}catch(err){setError(err.message);setBarChart(null);setScatterChart(null);}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[/*#__PURE__*/_jsx(\"h1\",{style:styles.header,children:\"\\u6C34\\u4EA7\\u6570\\u636E\\u53EF\\u89C6\\u5316\\u7CFB\\u7EDF\"}),/*#__PURE__*/_jsx(\"div\",{style:styles.controlPanel,children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleSubmit,style:{...styles.submitButton,...(isLoading&&styles.submitButton[':disabled'])},disabled:isLoading,children:isLoading?'数据加载中...':'加载水产数据'})}),error&&/*#__PURE__*/_jsxs(\"div\",{style:styles.error,children:[\"\\u26A0\\uFE0F \",error]}),isLoading&&/*#__PURE__*/_jsxs(\"div\",{style:styles.loadingOverlay,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.spinner}),/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'1rem',color:'#3498db'},children:\"\\u6B63\\u5728\\u5206\\u6790\\u6C34\\u4EA7\\u6570\\u636E...\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.chartContainer,children:[barChart&&/*#__PURE__*/_jsxs(\"div\",{style:styles.chartCard,children:[/*#__PURE__*/_jsx(\"h2\",{style:styles.chartTitle,children:\"\\u9C7C\\u7C7B\\u5E73\\u5747\\u91CD\\u91CF\\u5206\\u6790\"}),/*#__PURE__*/_jsx(\"img\",{src:`data:image/png;base64,${barChart}`,alt:\"\\u9C7C\\u7C7B\\u5E73\\u5747\\u91CD\\u91CF\",style:styles.chartImage})]}),scatterChart&&/*#__PURE__*/_jsxs(\"div\",{style:styles.chartCard,children:[/*#__PURE__*/_jsx(\"h2\",{style:styles.chartTitle,children:\"\\u4F53\\u578B\\u7279\\u5F81\\u5206\\u5E03\"}),/*#__PURE__*/_jsx(\"img\",{src:`data:image/png;base64,${scatterChart}`,alt:\"\\u4F53\\u578B\\u7279\\u5F81\\u5206\\u5E03\",style:styles.chartImage})]})]})]});}export default FishVisualization;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","FishVisualization","barChart","setBarChart","scatterChart","setScatterChart","error","setError","isLoading","setIsLoading","styles","container","maxWidth","margin","padding","fontFamily","header","textAlign","color","marginBottom","fontSize","textShadow","controlPanel","display","justifyContent","submitButton","backgroundColor","border","borderRadius","cursor","transition","transform","chartContainer","gridTemplateColumns","gap","marginTop","chartCard","boxShadow","chartTitle","chartImage","width","height","loadingOverlay","position","top","left","right","bottom","flexDirection","alignItems","zIndex","spinner","borderTop","animation","handleSubmit","e","preventDefault","response","fetch","method","headers","ok","Error","text","data","json","bar_chart","scatter_chart","err","message","style","children","type","onClick","disabled","src","alt"],"sources":["D:/软件工程/智慧海洋牧场可视化系统/frontend/src/pages/FishVisualization.js"],"sourcesContent":["import React, { useState } from 'react';\r\n\r\nfunction FishVisualization() {\r\n  // 状态管理\r\n  const [barChart, setBarChart] = useState(null);\r\n  const [scatterChart, setScatterChart] = useState(null);\r\n  const [error, setError] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  // 样式对象（与示例保持一致）\r\n  const styles = {\r\n    container: {\r\n      maxWidth: '1200px',\r\n      margin: '0 auto',\r\n      padding: '2rem',\r\n      fontFamily: \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\"\r\n    },\r\n    header: {\r\n      textAlign: 'center',\r\n      color: '#2c3e50',\r\n      marginBottom: '2rem',\r\n      fontSize: '2.5rem',\r\n      textShadow: '2px 2px 4px rgba(0,0,0,0.1)'\r\n    },\r\n    controlPanel: {\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      marginBottom: '2rem'\r\n    },\r\n    submitButton: {\r\n      padding: '0.8rem 2rem',\r\n      backgroundColor: '#3498db',\r\n      color: 'white',\r\n      border: 'none',\r\n      borderRadius: '8px',\r\n      fontSize: '1.1rem',\r\n      cursor: 'pointer',\r\n      transition: 'all 0.3s ease',\r\n      ':hover': {\r\n        backgroundColor: '#2980b9',\r\n        transform: 'translateY(-1px)'\r\n      },\r\n      ':disabled': {\r\n        backgroundColor: '#bdc3c7',\r\n        cursor: 'not-allowed',\r\n        transform: 'none'\r\n      }\r\n    },\r\n    error: {\r\n      backgroundColor: '#ffe6e6',\r\n      color: '#e74c3c',\r\n      padding: '1rem',\r\n      borderRadius: '8px',\r\n      margin: '1rem auto',\r\n      maxWidth: '600px',\r\n      textAlign: 'center',\r\n      border: '1px solid #e74c3c'\r\n    },\r\n    chartContainer: {\r\n      display: 'grid',\r\n      gridTemplateColumns: 'repeat(auto-fit, minmax(400px, 1fr))',\r\n      gap: '2rem',\r\n      marginTop: '2rem'\r\n    },\r\n    chartCard: {\r\n      backgroundColor: 'white',\r\n      borderRadius: '12px',\r\n      padding: '1.5rem',\r\n      boxShadow: '0 4px 6px rgba(0,0,0,0.1)',\r\n      transition: 'transform 0.3s ease',\r\n      ':hover': {\r\n        transform: 'translateY(-5px)'\r\n      }\r\n    },\r\n    chartTitle: {\r\n      color: '#2c3e50',\r\n      marginBottom: '1rem',\r\n      textAlign: 'center'\r\n    },\r\n    chartImage: {\r\n      width: '100%',\r\n      height: 'auto',\r\n      borderRadius: '8px'\r\n    },\r\n    loadingOverlay: {\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      backgroundColor: 'rgba(255, 255, 255, 0.9)',\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      zIndex: 1000\r\n    },\r\n    spinner: {\r\n      width: '50px',\r\n      height: '50px',\r\n      borderRadius: '50%',\r\n      border: '4px solid #f3f3f3',\r\n      borderTop: '4px solid #3498db',\r\n      animation: 'spin 1s linear infinite'\r\n    }\r\n  };\r\n\r\n  // 提交处理\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:3001/visualize-fish', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' }\r\n      });\r\n\r\n      if (!response.ok) throw new Error(await response.text());\r\n      \r\n      const data = await response.json();\r\n      if (data.error) throw new Error(data.error);\r\n\r\n      setBarChart(data.bar_chart);\r\n      setScatterChart(data.scatter_chart);\r\n    } catch (err) {\r\n      setError(err.message);\r\n      setBarChart(null);\r\n      setScatterChart(null);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <h1 style={styles.header}>水产数据可视化系统</h1>\r\n\r\n      <div style={styles.controlPanel}>\r\n        <button\r\n          type=\"button\"\r\n          onClick={handleSubmit}\r\n          style={{\r\n            ...styles.submitButton,\r\n            ...(isLoading && styles.submitButton[':disabled'])\r\n          }}\r\n          disabled={isLoading}\r\n        >\r\n          {isLoading ? '数据加载中...' : '加载水产数据'}\r\n        </button>\r\n      </div>\r\n\r\n      {error && <div style={styles.error}>⚠️ {error}</div>}\r\n\r\n      {isLoading && (\r\n        <div style={styles.loadingOverlay}>\r\n          <div style={styles.spinner}></div>\r\n          <p style={{ marginTop: '1rem', color: '#3498db' }}>正在分析水产数据...</p>\r\n        </div>\r\n      )}\r\n\r\n      <div style={styles.chartContainer}>\r\n        {barChart && (\r\n          <div style={styles.chartCard}>\r\n            <h2 style={styles.chartTitle}>鱼类平均重量分析</h2>\r\n            <img \r\n              src={`data:image/png;base64,${barChart}`} \r\n              alt=\"鱼类平均重量\"\r\n              style={styles.chartImage}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {scatterChart && (\r\n          <div style={styles.chartCard}>\r\n            <h2 style={styles.chartTitle}>体型特征分布</h2>\r\n            <img\r\n              src={`data:image/png;base64,${scatterChart}`}\r\n              alt=\"体型特征分布\"\r\n              style={styles.chartImage}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FishVisualization;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}