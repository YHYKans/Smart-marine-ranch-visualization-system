{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminDashboard=()=>{const{userInfo,logout,authFetch}=useAuth();const[activeTab,setActiveTab]=useState('users');const[users,setUsers]=useState([]);const[logs,setLogs]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const navigate=useNavigate();// 添加导航钩子\nuseEffect(()=>{console.log('AdminDashboard - 当前用户:',userInfo);// 立即检查用户权限\nif(!userInfo||!userInfo.isAdmin){console.log('AdminDashboard - 非管理员访问，重定向到用户仪表板');navigate('/user-dashboard');return;}fetchData(activeTab);},[activeTab,navigate,userInfo]);const fetchData=async tab=>{setLoading(true);setError(null);try{if(tab==='users'){await fetchUsers();}else if(tab==='logs'){await fetchLogs();}}catch(err){console.error('获取数据失败:',err);setError(err.message||'获取数据失败');// 检查是否是权限问题(403)\nif(err.message.includes('权限')||err.message.includes('访问被拒绝')){console.log('权限被拒绝，重定向到用户仪表板');navigate('/user-dashboard');}}finally{setLoading(false);}};const fetchUsers=async()=>{const response=await authFetch('/api/users');if(!response.ok){const data=await response.json();// 特别处理403错误\nif(response.status===403){console.log('管理员API访问被拒绝，重定向到用户仪表板');navigate('/user-dashboard');}throw new Error(data.message||'获取用户列表失败');}const data=await response.json();setUsers(data);};const fetchLogs=async()=>{const response=await authFetch('/api/logs');if(!response.ok){const data=await response.json();// 特别处理403错误\nif(response.status===403){console.log('管理员API访问被拒绝，重定向到用户仪表板');navigate('/user-dashboard');}throw new Error(data.message||'获取日志失败');}const data=await response.json();setLogs(data);};const formatDate=dateString=>{const date=new Date(dateString);return date.toLocaleString('zh-CN');};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(\"nav\",{className:\"bg-indigo-600 shadow-md\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between h-16\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-white\",children:\"\\u7BA1\\u7406\\u5458\\u63A7\\u5236\\u9762\\u677F\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-white mr-4\",children:[\"\\u7BA1\\u7406\\u5458\\uFF1A\",userInfo.username]}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded transition-colors duration-300\",children:\"\\u767B\\u51FA\"})]})]})})}),/*#__PURE__*/_jsx(\"main\",{className:\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-6 sm:px-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex border-b border-gray-200\",children:[/*#__PURE__*/_jsx(\"button\",{className:`py-2 px-4 font-medium text-sm ${activeTab==='users'?'border-b-2 border-indigo-500 text-indigo-600':'text-gray-500 hover:text-gray-700'}`,onClick:()=>setActiveTab('users'),children:\"\\u7528\\u6237\\u7BA1\\u7406\"}),/*#__PURE__*/_jsx(\"button\",{className:`py-2 px-4 font-medium text-sm ${activeTab==='logs'?'border-b-2 border-indigo-500 text-indigo-600':'text-gray-500 hover:text-gray-700'}`,onClick:()=>setActiveTab('logs'),children:\"\\u7CFB\\u7EDF\\u65E5\\u5FD7\"})]})}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u52A0\\u8F7D\\u4E2D...\"})}):error?/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\",children:/*#__PURE__*/_jsx(\"p\",{children:error})}):/*#__PURE__*/_jsxs(_Fragment,{children:[activeTab==='users'&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow overflow-hidden sm:rounded-lg\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u7528\\u6237\\u540D\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u90AE\\u7BB1\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u89D2\\u8272\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u72B6\\u6001\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u6CE8\\u518C\\u65F6\\u95F4\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u6700\\u540E\\u767B\\u5F55\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:[users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",children:user.username}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:user.email}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:user.isAdmin?'管理员':'普通用户'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${user.status==='active'?'bg-green-100 text-green-800':user.status==='suspended'?'bg-red-100 text-red-800':'bg-gray-100 text-gray-800'}`,children:user.status==='active'?'活跃':user.status==='suspended'?'已停用':'未激活'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:formatDate(user.createdAt)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:user.lastLogin?formatDate(user.lastLogin):'从未登录'})]},user._id)),users.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"6\",className:\"px-6 py-4 text-center text-sm text-gray-500\",children:\"\\u6CA1\\u6709\\u7528\\u6237\\u6570\\u636E\"})})]})]})}),activeTab==='logs'&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow overflow-hidden sm:rounded-lg\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u7528\\u6237\\u540D\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u64CD\\u4F5C\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u7528\\u6237\\u7C7B\\u578B\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u72B6\\u6001\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"IP\\u5730\\u5740\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u65F6\\u95F4\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:[logs.map(log=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",children:log.username}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:log.action==='login'?'登录':log.action==='register'?'注册':log.action==='logout'?'登出':'密码重置'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:log.userType==='admin'?'管理员':'普通用户'}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsx(\"span\",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${log.successful?'bg-green-100 text-green-800':'bg-red-100 text-red-800'}`,children:log.successful?'成功':'失败'}),!log.successful&&log.failureReason&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-xs text-red-600\",children:[\"(\",log.failureReason,\")\"]})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:log.ipAddress||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:formatDate(log.timestamp)})]},log._id)),logs.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"6\",className:\"px-6 py-4 text-center text-sm text-gray-500\",children:\"\\u6CA1\\u6709\\u65E5\\u5FD7\\u6570\\u636E\"})})]})]})})]})]})})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminDashboard","userInfo","logout","authFetch","activeTab","setActiveTab","users","setUsers","logs","setLogs","loading","setLoading","error","setError","navigate","console","log","isAdmin","fetchData","tab","fetchUsers","fetchLogs","err","message","includes","response","ok","data","json","status","Error","formatDate","dateString","date","Date","toLocaleString","className","children","username","onClick","scope","map","user","email","createdAt","lastLogin","_id","length","colSpan","action","userType","successful","failureReason","ipAddress","timestamp"],"sources":["D:/软件工程/智慧海洋牧场可视化系统/frontend/src/pages/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst AdminDashboard = () => {\r\n  const { userInfo, logout, authFetch } = useAuth();\r\n  const [activeTab, setActiveTab] = useState('users');\r\n  const [users, setUsers] = useState([]);\r\n  const [logs, setLogs] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const navigate = useNavigate(); // 添加导航钩子\r\n\r\n  useEffect(() => {\r\n    console.log('AdminDashboard - 当前用户:', userInfo);\r\n    \r\n    // 立即检查用户权限\r\n    if (!userInfo || !userInfo.isAdmin) {\r\n      console.log('AdminDashboard - 非管理员访问，重定向到用户仪表板');\r\n      navigate('/user-dashboard');\r\n      return;\r\n    }\r\n    \r\n    fetchData(activeTab);\r\n  }, [activeTab, navigate, userInfo]);\r\n\r\n  const fetchData = async (tab) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      if (tab === 'users') {\r\n        await fetchUsers();\r\n      } else if (tab === 'logs') {\r\n        await fetchLogs();\r\n      }\r\n    } catch (err) {\r\n      console.error('获取数据失败:', err);\r\n      setError(err.message || '获取数据失败');\r\n      \r\n      // 检查是否是权限问题(403)\r\n      if (err.message.includes('权限') || err.message.includes('访问被拒绝')) {\r\n        console.log('权限被拒绝，重定向到用户仪表板');\r\n        navigate('/user-dashboard');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchUsers = async () => {\r\n    const response = await authFetch('/api/users');\r\n    if (!response.ok) {\r\n      const data = await response.json();\r\n      \r\n      // 特别处理403错误\r\n      if (response.status === 403) {\r\n        console.log('管理员API访问被拒绝，重定向到用户仪表板');\r\n        navigate('/user-dashboard');\r\n      }\r\n      \r\n      throw new Error(data.message || '获取用户列表失败');\r\n    }\r\n    const data = await response.json();\r\n    setUsers(data);\r\n  };\r\n\r\n  const fetchLogs = async () => {\r\n    const response = await authFetch('/api/logs');\r\n    if (!response.ok) {\r\n      const data = await response.json();\r\n      \r\n      // 特别处理403错误\r\n      if (response.status === 403) {\r\n        console.log('管理员API访问被拒绝，重定向到用户仪表板');\r\n        navigate('/user-dashboard');\r\n      }\r\n      \r\n      throw new Error(data.message || '获取日志失败');\r\n    }\r\n    const data = await response.json();\r\n    setLogs(data);\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleString('zh-CN');\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100\">\r\n      <nav className=\"bg-indigo-600 shadow-md\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"flex justify-between h-16\">\r\n            <div className=\"flex items-center\">\r\n              <h1 className=\"text-xl font-bold text-white\">管理员控制面板</h1>\r\n            </div>\r\n            <div className=\"flex items-center\">\r\n              <span className=\"text-white mr-4\">管理员：{userInfo.username}</span>\r\n              <button\r\n                onClick={logout}\r\n                className=\"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded transition-colors duration-300\"\r\n              >\r\n                登出\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n      \r\n      <main className=\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\">\r\n        <div className=\"px-4 py-6 sm:px-0\">\r\n          <div className=\"mb-6\">\r\n            <div className=\"flex border-b border-gray-200\">\r\n              <button\r\n                className={`py-2 px-4 font-medium text-sm ${\r\n                  activeTab === 'users'\r\n                    ? 'border-b-2 border-indigo-500 text-indigo-600'\r\n                    : 'text-gray-500 hover:text-gray-700'\r\n                }`}\r\n                onClick={() => setActiveTab('users')}\r\n              >\r\n                用户管理\r\n              </button>\r\n              <button\r\n                className={`py-2 px-4 font-medium text-sm ${\r\n                  activeTab === 'logs'\r\n                    ? 'border-b-2 border-indigo-500 text-indigo-600'\r\n                    : 'text-gray-500 hover:text-gray-700'\r\n                }`}\r\n                onClick={() => setActiveTab('logs')}\r\n              >\r\n                系统日志\r\n              </button>\r\n            </div>\r\n          </div>\r\n          \r\n          {loading ? (\r\n            <div className=\"flex justify-center items-center h-64\">\r\n              <p className=\"text-gray-500\">加载中...</p>\r\n            </div>\r\n          ) : error ? (\r\n            <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\r\n              <p>{error}</p>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {activeTab === 'users' && (\r\n                <div className=\"bg-white shadow overflow-hidden sm:rounded-lg\">\r\n                  <table className=\"min-w-full divide-y divide-gray-200\">\r\n                    <thead className=\"bg-gray-50\">\r\n                      <tr>\r\n                        <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          用户名\r\n                        </th>\r\n                        <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          邮箱\r\n                        </th>\r\n                        <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          角色\r\n                        </th>\r\n                        <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          状态\r\n                        </th>\r\n                        <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          注册时间\r\n                        </th>\r\n                        <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          最后登录\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                      {users.map((user) => (\r\n                        <tr key={user._id}>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                            {user.username}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                            {user.email}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                            {user.isAdmin ? '管理员' : '普通用户'}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\r\n                              user.status === 'active' ? 'bg-green-100 text-green-800' : \r\n                              user.status === 'suspended' ? 'bg-red-100 text-red-800' : 'bg-gray-100 text-gray-800'\r\n                            }`}>\r\n                              {user.status === 'active' ? '活跃' : \r\n                               user.status === 'suspended' ? '已停用' : '未激活'}\r\n                            </span>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                            {formatDate(user.createdAt)}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                            {user.lastLogin ? formatDate(user.lastLogin) : '从未登录'}\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                      {users.length === 0 && (\r\n                        <tr>\r\n                          <td colSpan=\"6\" className=\"px-6 py-4 text-center text-sm text-gray-500\">\r\n                            没有用户数据\r\n                          </td>\r\n                        </tr>\r\n                      )}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              )}\r\n              \r\n              {activeTab === 'logs' && (\r\n                <div className=\"bg-white shadow overflow-hidden sm:rounded-lg\">\r\n                  <table className=\"min-w-full divide-y divide-gray-200\">\r\n                    <thead className=\"bg-gray-50\">\r\n                      <tr>\r\n                        <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          用户名\r\n                        </th>\r\n                        <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          操作\r\n                        </th>\r\n                        <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          用户类型\r\n                        </th>\r\n                        <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          状态\r\n                        </th>\r\n                        <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          IP地址\r\n                        </th>\r\n                        <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          时间\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                      {logs.map((log) => (\r\n                        <tr key={log._id}>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                            {log.username}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                            {log.action === 'login' ? '登录' : \r\n                             log.action === 'register' ? '注册' : \r\n                             log.action === 'logout' ? '登出' : '密码重置'}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                            {log.userType === 'admin' ? '管理员' : '普通用户'}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\r\n                              log.successful ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\r\n                            }`}>\r\n                              {log.successful ? '成功' : '失败'}\r\n                            </span>\r\n                            {!log.successful && log.failureReason && (\r\n                              <span className=\"ml-2 text-xs text-red-600\">\r\n                                ({log.failureReason})\r\n                              </span>\r\n                            )}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                            {log.ipAddress || '-'}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                            {formatDate(log.timestamp)}\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                      {logs.length === 0 && (\r\n                        <tr>\r\n                          <td colSpan=\"6\" className=\"px-6 py-4 text-center text-sm text-gray-500\">\r\n                            没有日志数据\r\n                          </td>\r\n                        </tr>\r\n                      )}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}